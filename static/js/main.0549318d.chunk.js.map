{"version":3,"sources":["icons/camera.svg","icons/save.svg","components/stickerContainer/stickerSvgs/glasses1.svg","components/stickerContainer/stickerSvgs/glasses2.svg","components/stickerContainer/stickerSvgs/glasses3.svg","components/stickerContainer/stickerSvgs/grin1PNG.svg","components/stickerContainer/stickerSvgs/tear1.svg","components/stickerContainer/stickerSvgs/sad1.svg","components/stickerContainer/stickerSvgs/smirk1PNG.svg","components/stickerContainer/stickerSvgs/unibrow1.svg","components/stickerContainer/stickerSvgs/teehee.svg","components/stickerContainer/stickerSvgs/lol.svg","components/stickerContainer/stickerSvgs/zzz.svg","components/stickerContainer/stickerSvgs/awesome.svg","components/stickerContainer/stickerSvgs/cool.svg","components/stickerContainer/stickerSvgs/exclamation.svg","components/stickerContainer/stickerSvgs/question.svg","components/stickerContainer/stickerSvgs/dollar.svg","components/stickerContainer/stickerSvgs/euro.svg","components/stickerContainer/stickerSvgs/britishPound.svg","actions/types.js","actions/canvasActions.js","trimCanvas.js","actions/stickerActions.js","components/stickerContainer/StickerContainer.js","actions/filterActions.js","components/filterContainer/index.js","components/filterContainer/FilterContainer.js","icons/index.js","components/buttons/Buttons.js","components/paintBrush/PaintBrush.js","actions/textActions.js","actions/paintActions.js","components/mobileToolbar/MobileTools.js","components/mobileToolbar/MobileToolbar.js","components/stickerContainer/StickerComp.js","App.js","components/stickerContainer/stickerSvgs/index.js","reducers/stickerReducer.js","reducers/canvasReducer.js","reducers/filterReducer.js","reducers/textReducer.js","reducers/paintReducer.js","reducers/index.js","store.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","SET_CANVAS_REF","UPLOAD_MAIN_IMG","HANDLE_MOUSE_MOVE","SAVE_IMAGE_STATE","DECREMENT_ACTIVE_IMAGE_STATE","INCREMENT_ACTIVE_IMAGE_STATE","SELECT_STICKER","SELECT_STICKER_SIZE","ADD_STICKER","DELETE_STICKER","SAVE_NEW_STICKER_CORDINATES","SELECT_FILTER","TOGGLE_PAINT","CHANGE_BRUSH_WIDTH","CHANGE_BRUSH_COLOR","saveImage","stickers","canvas","document","getElementById","ctx","canvasXbounding","getBoundingClientRect","x","canvasYbounding","y","addedStickers","pixels","getImageData","width","height","_loop","i","logoSvg","Image","src","onload","drawImage","size","length","setTimeout","link","createElement","className","image","trimmedCanvas","c","getContext","copy","l","data","bound","top","left","right","bottom","trimHeight","trimWidth","trimmed","putImageData","trimCanvas","toDataURL","innerHTML","appendChild","style","concat","addEventListener","ev","href","download","Date","toISOString","remove","body","saveImageState","imageState","dispatch","type","payload","decrementActiveImageState","incrementActiveImageState","addSticker","sticker","StickerContainer","_this","this","secondaryClassname","props","_this$props$stickers","selectedSticker","outputStickers","map","react_default","a","key","title","alt","onClick","selectSticker","name","onChange","e","selectStickerSize","target","value","selected","Component","connect","state","addFilter","filter","r","g","b","addBrightness","decreaseBrightness","filters","FilterContainer","_this$props","selectFilter","selectedFilter","outputFilters","background","icons","camera","save","Buttons","mouseX","mouseY","stickerSize","id","isDragging","pixelsOriginal","activeImageState","console","log","_context","t0","_context2","_this$props2","imageUploadHandler","undo","bind","redo","ref","accept","PaintBrush","showTextForm","middle","toggleTextForm","setState","inputText","Object","defineProperty","addText","preventDefault","_this$state","_this2","_this$state2","onSubmit","min","max","paint","step","changeBrushWidth","color","changeBrushColor","centerX","topY","centerY","bottomY","font","textAlign","fillStyle","fillText","toUpperCase","MobileTools","children","MobileToolbar","showFilters","showStickers","showMobileTools","toggleMenus","outputMenu","setPaintBrushSettings","paintBrush","textSettings","togglePaintMode","stickerContainer_StickerContainer","filterContainer_FilterContainer","mobileToolbar_MobileTools","paintBrush_PaintBrush","StickerComp","dragging","cordinatesX","window","innerWidth","cordinatesY","innerHeight","dragSticker","canvasRightBounding","canvasBottomBounding","clientX","clientY","touches","saveNewCordinates","stickerData","saveNewStickerCordinates","toggleDrag","deleteSticker","position","zIndex","border","onMouseMove","onMouseLeave","onDoubleClick","draggable","onTouchMove","onTouchEnd","stickerCordinates","App","mobileWindowHeight","mobileWindowWidth","uploadedImage","orientationNumber","originalPhoto","mobile","URL","createObjectURL","files","uploadMainImg","handleMouseMove","paintData","applyPaint","rect","refs","handleTouchPaint","togglePaintMobile","setMouseCordinates","orientation","navigator","userAgent","indexOf","canvasX","canvasY","canvasXmobile","welcomeText","imageData","err","_this$state3","React","createRef","onMouseEnter","onMouseDown","onMouseUp","onTouchStart","undefined","stickerContainer_StickerComp","buttons_Buttons","adjustBrightness","display","mobileToolbar_MobileToolbar","setCanvasRef","canvasRef","cordinates","logoSVG","mainImg","aspectRatio","mouseXposition","mouseYposition","strokeStyle","lineWidth","lineJoin","lineCap","beginPath","moveTo","lineTo","stroke","glasses1","glasses2","glasses3","teehee","lol","zzz","awesome","cool","exclamation","question","dollar","euro","britishPound","grin1","tear1","sad1","smirk1","unibrow1","initialState","loading","initalState","combineReducers","arguments","action","objectSpread","newStickerData","text","middleware","thunk","store","createStore","rootReducer","applyMiddleware","apply","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","process","origin","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker","ReactDOM","render","es","src_App_0"],"mappings":"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","file":"static/js/main.0549318d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/camera.e1513c0e.svg\";","module.exports = __webpack_public_path__ + \"static/media/save.08042235.svg\";","module.exports = __webpack_public_path__ + \"static/media/glasses1.e3c0de2a.svg\";","module.exports = __webpack_public_path__ + \"static/media/glasses2.008b698c.svg\";","module.exports = __webpack_public_path__ + \"static/media/glasses3.de98151c.svg\";","module.exports = __webpack_public_path__ + \"static/media/grin1PNG.90f2c051.svg\";","module.exports = __webpack_public_path__ + \"static/media/tear1.4c79d8f4.svg\";","module.exports = __webpack_public_path__ + \"static/media/sad1.2adb5c86.svg\";","module.exports = __webpack_public_path__ + \"static/media/smirk1PNG.ab9aeb72.svg\";","module.exports = __webpack_public_path__ + \"static/media/unibrow1.7381bf4b.svg\";","module.exports = __webpack_public_path__ + \"static/media/teehee.d2211d63.svg\";","module.exports = __webpack_public_path__ + \"static/media/lol.252b2af4.svg\";","module.exports = __webpack_public_path__ + \"static/media/zzz.724a58af.svg\";","module.exports = __webpack_public_path__ + \"static/media/awesome.260ab8ee.svg\";","module.exports = __webpack_public_path__ + \"static/media/cool.477ba34c.svg\";","module.exports = __webpack_public_path__ + \"static/media/exclamation.88226d08.svg\";","module.exports = __webpack_public_path__ + \"static/media/question.eb720450.svg\";","module.exports = __webpack_public_path__ + \"static/media/dollar.0a798ebe.svg\";","module.exports = __webpack_public_path__ + \"static/media/euro.4758b5c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/britishPound.b897a7a1.svg\";","export const SET_CANVAS_REF = 'SET_CANVAS_REF';\r\nexport const UPLOAD_MAIN_IMG = 'UPLOAD_MAIN_IMG';\r\nexport const HANDLE_MOUSE_MOVE = 'HANDLE_MOUSE_MOVE';\r\nexport const SAVE_IMAGE_STATE = 'SAVE_IMAGE_STATE';\r\nexport const DECREMENT_ACTIVE_IMAGE_STATE = 'DECREMENT_ACTIVE_IMAGE_STATE';\r\nexport const INCREMENT_ACTIVE_IMAGE_STATE = 'INCREMENT_ACTIVE_IMAGE_STATE';\r\nexport const SELECT_STICKER = 'SELCET_STICKER';\r\nexport const SELECT_STICKER_SIZE = 'SELECT_STICKER_SIZE';\r\nexport const ADD_STICKER = 'ADD_STICKER';\r\nexport const DELETE_STICKER = 'DELETE_STICKER';\r\nexport const SAVE_NEW_STICKER_CORDINATES = 'SAVE_NEW_STICKER_CORDINATES';\r\nexport const SELECT_FILTER = 'SELECT_FILTER';\r\nexport const ADD_FILTER = 'ADD_FILTER';\r\nexport const ADD_BRIGHTNESS = 'ADD_BRIGHTNESS';\r\nexport const DECREASE_BRIGHTNESS = 'DECREASE_BRIGHTNESS';\r\nexport const ADD_TEXT = 'ADD_TEXT';\r\nexport const TOGGLE_PAINT = 'TOGGLE_PAINT';\r\nexport const CHANGE_BRUSH_WIDTH = 'CHANGE_BRUSH_WIDTH';\r\nexport const CHANGE_BRUSH_COLOR = 'CHANGE_BRUSH_COLOR';","import { SET_CANVAS_REF, HANDLE_MOUSE_MOVE, UPLOAD_MAIN_IMG, SAVE_IMAGE_STATE, DECREMENT_ACTIVE_IMAGE_STATE, INCREMENT_ACTIVE_IMAGE_STATE } from './types';\r\n\r\nimport { trimCanvas } from '../trimCanvas';\r\n\r\nexport const handleMouseMove = cordinates => dispatch => {\r\n    dispatch({\r\n        type: HANDLE_MOUSE_MOVE,\r\n        payload: cordinates\r\n    })\r\n}\r\n\r\nexport const setCanvasRef = (canvasRef) => dispatch => {\r\n    dispatch({\r\n        type: SET_CANVAS_REF,\r\n        payload: canvasRef\r\n    })\r\n}\r\n\r\nexport const uploadMainImg = data => dispatch => {\r\n    const canvas = document.getElementById('canvas');\r\n\r\n    \r\n    let logoSVG = new Image();\r\n    const mainImg = document.getElementById('mainImg');\r\n    \r\n    if(logoSVG.height > 500) {\r\n        logoSVG.height = 500;\r\n    }\r\n    \r\n\r\n\r\n        logoSVG.onload = () => {\r\n            const ctx = canvas.getContext('2d');\r\n            let aspectRatio;\r\n              /*const width = canvas.width;\r\n              const height = canvas.height;\r\n      \r\n              data.ctx.drawImage(logoSVG, 0,0, width, height)*/\r\n\r\n              if(logoSVG.height > logoSVG.width) {\r\n                aspectRatio =  mainImg.height / mainImg.width;\r\n                const width = canvas.width;\r\n                const height = canvas.width * aspectRatio;\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                if(canvas.height > 500) {\r\n                    canvas.height = 500;\r\n                    \r\n                }\r\n                ctx.drawImage(logoSVG, 0,0, width, height)\r\n              } else if (logoSVG.width > logoSVG.height) {\r\n                aspectRatio = mainImg.width / mainImg.height; \r\n                const width = canvas.width;\r\n                const height = canvas.height  / aspectRatio;\r\n                canvas.width = width;\r\n                canvas.height = height;\r\n                //ctx.drawImage(logoSVG, 0, canvas.height / 8, width, height)\r\n                ctx.drawImage(logoSVG, 0, 0 / 8, width, height)\r\n                canvas.style.top = `calc(50% - ${canvas.height / 2}px)`;\r\n              }\r\n            }\r\n       \r\n           \r\n       logoSVG.src = data.imageData;\r\n           \r\n\r\n       dispatch({\r\n           type: UPLOAD_MAIN_IMG,\r\n           payload: data\r\n        }) \r\n}\r\n\r\nexport const saveImage = (stickers) => () => {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = stickers.ctx;\r\n    let canvasXbounding = canvas.getBoundingClientRect().x;\r\n    let canvasYbounding = canvas.getBoundingClientRect().y;\r\n\r\n    const addedStickers = stickers.addedStickers;\r\n\r\n    const pixels = ctx.getImageData(0,0, canvas.width, canvas.height);\r\n\r\n   for(let i = 0; i < addedStickers.length; i++) {\r\n    const logoSvg = new Image();\r\n    logoSvg.src = addedStickers[i].src;\r\n    logoSvg.onload = () => {\r\n     \r\n         \r\n            ctx.drawImage(logoSvg, addedStickers[i].x - canvasXbounding, addedStickers[i].y - canvasYbounding, addedStickers[i].width * addedStickers[i].size , addedStickers[i].height * addedStickers[i].size);\r\n   }\r\n  }\r\n\r\n\r\n\r\nsetTimeout(() => {\r\nconst link = document.createElement('a');\r\nlink.className = \"modalSave\"\r\nconst image = document.createElement('img');\r\nconst trimmedCanvas = trimCanvas(canvas);\r\nimage.src = trimmedCanvas.toDataURL();\r\n\r\nlink.innerHTML = 'Download image';\r\nlink.appendChild(image)\r\n\r\nlink.style.height = `${trimmedCanvas.height + 30}px`\r\nlink.addEventListener('click', function(ev) {\r\nlink.href = trimmedCanvas.toDataURL();\r\nlink.download = `FilterMatic${new Date().toISOString()}.png`\r\nlink.remove();\r\n}, false);\r\ndocument.body.appendChild(link); \r\ndocument.body.addEventListener('click', () => {\r\n  ctx.putImageData(pixels, 0, 0);\r\n  link.remove()\r\n})\r\n},300)\r\n}\r\n\r\nexport const saveImageState = imageState => dispatch => {\r\n    dispatch({\r\n        type: SAVE_IMAGE_STATE,\r\n        payload: imageState\r\n    })\r\n}\r\n\r\nexport const decrementActiveImageState = () => dispatch => {\r\n    dispatch({\r\n        type: DECREMENT_ACTIVE_IMAGE_STATE\r\n    })\r\n}\r\n\r\nexport const incrementActiveImageState = () => dispatch => {\r\n    dispatch({\r\n        type: INCREMENT_ACTIVE_IMAGE_STATE\r\n    })\r\n}","export const trimCanvas = (c) => \r\n{\r\n\r\nvar ctx = c.getContext('2d'),\r\ncopy = document.createElement('canvas').getContext('2d'),\r\npixels = ctx.getImageData(0, 0, c.width, c.height),\r\nl = pixels.data.length,\r\ni,\r\nbound = {\r\n    top: null,\r\n    left: null,\r\n    right: null,\r\n    bottom: null\r\n},\r\nx, y;\r\n\r\n// Iterate over every pixel to find the highest\r\n// and where it ends on every axis ()\r\nfor (i = 0; i < l; i += 4) {\r\nif (pixels.data[i + 3] !== 0) {\r\n    x = (i / 4) % c.width;\r\n    y = ~~((i / 4) / c.width);\r\n\r\n    if (bound.top === null) {\r\n        bound.top = y;\r\n    }\r\n\r\n    if (bound.left === null) {\r\n        bound.left = x;\r\n    } else if (x < bound.left) {\r\n        bound.left = x;\r\n    }\r\n\r\n    if (bound.right === null) {\r\n        bound.right = x;\r\n    } else if (bound.right < x) {\r\n        bound.right = x;\r\n    }\r\n\r\n    if (bound.bottom === null) {\r\n        bound.bottom = y;\r\n    } else if (bound.bottom < y) {\r\n        bound.bottom = y;\r\n    }\r\n}\r\n}\r\n\r\n// Calculate the height and width of the content\r\nvar trimHeight = bound.bottom - bound.top,\r\ntrimWidth = bound.right - bound.left,\r\ntrimmed = ctx.getImageData(bound.left, bound.top, trimWidth, trimHeight);\r\n\r\ncopy.canvas.width = trimWidth;\r\ncopy.canvas.height = trimHeight;\r\ncopy.putImageData(trimmed, 0, 0);\r\n\r\n// Return trimmed canvas\r\n\r\nreturn copy.canvas;\r\n}","import { SELECT_STICKER, SELECT_STICKER_SIZE, ADD_STICKER, DELETE_STICKER, SAVE_NEW_STICKER_CORDINATES } from './types';\r\n\r\nexport const selectSticker = sticker => dispatch => {\r\n    dispatch({\r\n        type: SELECT_STICKER, \r\n        payload: sticker\r\n    })\r\n}\r\n\r\nexport const selectStickerSize = size => dispatch => {\r\n    dispatch({\r\n        type: SELECT_STICKER_SIZE,\r\n        payload: size\r\n    })\r\n}\r\n\r\nexport const addSticker = sticker => dispatch => {\r\n    dispatch({\r\n        type: ADD_STICKER,\r\n        payload: sticker\r\n    })\r\n}\r\n\r\nexport const deleteSticker = sticker => dispatch => {\r\n    dispatch({\r\n        type: DELETE_STICKER,\r\n        payload: sticker\r\n    })\r\n}\r\n\r\nexport const saveNewStickerCordinates = stickerCordinates => dispatch => {\r\n    dispatch({\r\n        type: SAVE_NEW_STICKER_CORDINATES,\r\n        payload: stickerCordinates\r\n    })\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { selectSticker, selectStickerSize } from '../../actions/stickerActions';\r\n\r\nclass StickerContainer extends Component {\r\n  render() {\r\n      const { secondaryClassname } = this.props;\r\n      const { selectedSticker, stickers} = this.props.stickers;\r\n      let outputStickers = stickers.map(sticker => (\r\n          <img key={sticker.title} src={sticker.src} alt=\"sticker\" onClick={() => this.props.selectSticker(sticker)} className={selectedSticker.title === sticker.title ? 'selected' : null}/>\r\n      ))\r\n\r\n    return (\r\n      <div className={`stickerContainer ${secondaryClassname}`}>\r\n      <div className=\"infoAndSelectors\">\r\n        <h3>Stickers</h3>\r\n        <select name=\"stickerSize\" onChange={(e) => this.props.selectStickerSize(e.target.value)}>\r\n          <option value=\"sm\">Small</option>\r\n          <option selected value=\"md\">Medium</option>\r\n          <option value=\"lg\">Large</option>\r\n          <option value=\"xl\">Extra Large</option>\r\n          <option value=\"xxl\">Extra extra Large</option>\r\n        </select>\r\n        </div>\r\n        <div className=\"stickers\">\r\n        {outputStickers}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  stickers: state.stickers\r\n})\r\n\r\nexport default connect(mapStateToProps, { selectSticker, selectStickerSize })(StickerContainer);","import { SELECT_FILTER } from './types';\r\n\r\nexport const selectFilter = filter => dispatch => {\r\n    dispatch({\r\n        type: SELECT_FILTER,\r\n        payload: filter\r\n    })\r\n} \r\n\r\nexport const addFilter = data => () => {\r\n\r\n  \r\n        const canvas = document.getElementById('canvas');\r\n        const ctx = data.ctx;\r\n        let pixels = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    \r\n    \r\n        \r\n        for (let i = 0; i < pixels.data.length; i+=4) {\r\n          pixels.data[i + 0] = pixels.data[i + 0] + data.filter.r; // RED\r\n          pixels.data[i + 1] = pixels.data[i + 1] + data.filter.g; // GREEN\r\n          pixels.data[i + 2] = pixels.data[i + 2] + data.filter.b; // Blue\r\n        }\r\n        \r\n        \r\n        ctx.putImageData(pixels, 0, 0);\r\n}\r\n\r\nexport const addBrightness = ctx => () => {\r\n\r\n    const canvas = document.getElementById('canvas');\r\n    let pixels = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    \r\n    for (let i = 0; i < pixels.data.length; i+=4) {\r\n        pixels.data[i + 0] = pixels.data[i + 0] + 10; // RED\r\n        pixels.data[i + 1] = pixels.data[i + 1] + 10; // GREEN\r\n        pixels.data[i + 2] = pixels.data[i + 2] + 10; // Blue\r\n        // pixels.data[i + 3] = pixels.data[i + 3] + 10; */\r\n    } \r\n\r\n    ctx.putImageData(pixels, 0, 0);\r\n}\r\n\r\nexport const decreaseBrightness = ctx => ()  => {\r\n\r\n    const canvas = document.getElementById('canvas');\r\n    let pixels = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    \r\n    for (let i = 0; i < pixels.data.length; i+=4) {\r\n        pixels.data[i + 0] = pixels.data[i + 0] - 10; // RED\r\n        pixels.data[i + 1] = pixels.data[i + 1] - 10; // GREEN\r\n        pixels.data[i + 2] = pixels.data[i + 2] - 10; // Blue\r\n      } \r\n\r\n    ctx.putImageData(pixels, 0, 0);\r\n}","export const filters = [\r\n    {\r\n        title: 'lightBlue',\r\n        r: 0,\r\n        g: 13,\r\n        b: 55.5\r\n    },\r\n    {\r\n        title: 'Brilliant Lavander',\r\n        r: 26,\r\n        g: -16,\r\n        b: 35\r\n    }, \r\n    {\r\n        title: 'Camouflage Green',\r\n        r: 20,\r\n        g: 34,\r\n        b: 7\r\n    },\r\n    {\r\n        title: 'Azure Mist',\r\n        r: 40,\r\n        g: 55,\r\n        b: 55\r\n    },\r\n    {\r\n        title: 'Amber',\r\n        r: 25,\r\n        g: -29,\r\n        b: -50\r\n    },\r\n    {\r\n        title: 'Alien',\r\n        r: -28,\r\n        g: 2,\r\n        b: -58\r\n    },\r\n    {\r\n        title: 'Cool Green',\r\n        r: -91,\r\n        g: 15,\r\n        b: -36\r\n    },\r\n    {\r\n        title: 'Snow',\r\n        r: 55,\r\n        g: 50,\r\n        b: 50\r\n    },\r\n    {\r\n        title: 'Sky Blue',\r\n        r: -65,\r\n        g: 6,\r\n        b: 15\r\n    },\r\n    {\r\n        title: 'Lime',\r\n        r: -50,\r\n        g: 5,\r\n        b: -50\r\n    },\r\n    {\r\n        title: 'Hot Pink',\r\n        r: 25,\r\n        g: -25,\r\n        b: 0\r\n    },\r\n    {\r\n        title: 'Turquoise',\r\n        r: -100,\r\n        g: 16,\r\n        b: 19 \r\n    }\r\n]","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { selectFilter } from '../../actions/filterActions';\r\n\r\nimport { filters } from './';\r\n\r\nclass FilterContainer extends Component {\r\n  render() {\r\n      const { selectFilter, secondaryClassname} = this.props;\r\n      const { selectedFilter } = this.props.filters;\r\n      let outputFilters = filters.map(filter => (\r\n        <div \r\n        key={filter.title} \r\n        onClick={() => selectFilter(filter)} \r\n        style={selectedFilter.title === filter.title ? {background: `rgba(${filter.r + 100}, ${filter.g + 100}, ${filter.b + 100}, 0.5)`} : {background: `rgba(${filter.r + 100}, ${filter.g + 100}, ${filter.b + 100}, 0.5)`}} className={selectedFilter.title === filter.title ? 'selected filter' : 'filter'}>{filter.title}</div>\r\n      ))\r\n    return (\r\n      <div className={`filterContainer ${secondaryClassname}`}>\r\n        <div className=\"infoAndSelectors\">\r\n        <h3>Filters</h3>\r\n        </div>\r\n        <div className=\"filters\">\r\n          {outputFilters}\r\n          </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  filters: state.filters\r\n})\r\n\r\nexport default connect(mapStateToProps ,{ selectFilter })(FilterContainer);","import camera from './camera.svg';\r\nimport save from './save.svg'\r\n\r\nexport const icons = {\r\n    camera,\r\n    save\r\n}","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { addSticker } from '../../actions/stickerActions';\r\nimport { addFilter, addBrightness, decreaseBrightness } from '../../actions/filterActions';\r\nimport { saveImage, saveImageState, decrementActiveImageState, incrementActiveImageState } from '../../actions/canvasActions';\r\nimport { icons } from '../../icons';\r\n\r\nclass Buttons extends Component {\r\n\r\n  addSticker = (e) => {\r\n   const  { mouseX, mouseY } = this.props;\r\n   const { stickerSize, selectedSticker } = this.props.stickers;\r\n  \r\n      let size;\r\n      switch(stickerSize) {\r\n        case 'sm':\r\n          size = 1.5;\r\n          break;\r\n          case 'md':\r\n          size = 2;\r\n          break;\r\n          case 'lg':\r\n          size = 3;\r\n          break;\r\n          case 'xl':\r\n          size = 4;\r\n          break;\r\n          case 'xxl':\r\n          size = 5;\r\n          break;\r\n        default:\r\n        size = 1\r\n      }\r\n  \r\n      const sticker = {\r\n        title: selectedSticker.title,\r\n        src: selectedSticker.src,\r\n        width: selectedSticker.width,\r\n        height: selectedSticker.height,\r\n        x: mouseX,\r\n        y: mouseY,\r\n        size,\r\n        id: new Date().toISOString(),\r\n        isDragging: false\r\n      }\r\n  \r\n      this.props.addSticker(sticker);\r\n     //this.setState({ stickers: stickers.concat(sticker) });\r\n    }\r\n\r\n    addFilter = () => {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      const data = {\r\n        filter: this.props.filters.selectedFilter,\r\n        ctx: ctx\r\n      }\r\n\r\n      this.props.addFilter(data)\r\n      let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      this.props.saveImageState(pixelsOriginal);\r\n    }\r\n\r\n    addBrightness = () => {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      this.props.addBrightness(ctx);\r\n      let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      this.props.saveImageState(pixelsOriginal);\r\n    }\r\n\r\n    decreaseBrightness = () => {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      this.props.decreaseBrightness(ctx);\r\n      let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      this.props.saveImageState(pixelsOriginal);\r\n    }\r\n\r\n    saveImage = () => {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      const data = {\r\n        ctx: ctx,\r\n        addedStickers: this.props.stickers.addedStickers\r\n      }\r\n\r\n      this.props.saveImage(data);\r\n    }\r\n\r\n   async undo () {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n      try {\r\n        await this.props.decrementActiveImageState();\r\n        ctx.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState - 1], 0, 0);\r\n      } catch(err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n\r\n    async redo () {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n        try {\r\n          await this.props.incrementActiveImageState();\r\n          ctx.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState - 1], 0, 0);\r\n        } catch(err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n  render() {\r\n    const { imageUploadHandler, secondaryClassname } = this.props;\r\n\r\n    return (\r\n      <div className={`buttons ${secondaryClassname}`}>\r\n      <button onClick={this.addBrightness} className=\"add\">Brightness +</button>\r\n      <button onClick={this.decreaseBrightness} className=\"decrease\">Brightness -</button>\r\n      <button onClick={this.addSticker}>Add a Sticker</button>\r\n      <button onClick={this.undo.bind(this)} className=\"undo\">Undo</button>\r\n      <button onClick={this.redo.bind(this)} className=\"redo\">Redo</button>\r\n      <button onClick={this.saveImage} ref=\"save\"> <img src={icons.save} alt=\"save\"/> Save</button>\r\n      <button onClick={this.addFilter}>Filter</button>\r\n      <label className=\"fileContainer\">\r\n      <img src={icons.camera} alt=\"camera\"/>\r\n      Click to choose an image\r\n      <input type=\"file\" name=\"image\" onChange={imageUploadHandler} accept=\"image/*\" /> \r\n      </label>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  stickers: state.stickers,\r\n  filters: state.filters,\r\n  canvas: state.canvas\r\n})\r\n\r\nexport default connect(mapStateToProps, { addSticker, addFilter, addBrightness, decreaseBrightness, saveImage, saveImageState, decrementActiveImageState, incrementActiveImageState })(Buttons);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { addText } from '../../actions/textActions';\r\nimport { changeBrushWidth, changeBrushColor } from '../../actions/paintActions';\r\n\r\nclass PaintBrush extends Component {\r\n  state = {\r\n    showTextForm: false,\r\n    top: '',\r\n    middle: '',\r\n    bottom: ''\r\n  }\r\n\r\n  toggleTextForm = () => {\r\n    const { showTextForm } = this.state;\r\n    this.setState({showTextForm: !showTextForm})\r\n  }\r\n\r\n  inputText = e => {\r\n    this.setState({[e.target.name]: e.target.value});\r\n  }\r\n\r\n  addText = e => {\r\n    e.preventDefault();\r\n\r\n    const { top, bottom, middle } = this.state;\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    const data = {\r\n      ctx: ctx,\r\n      top: top,\r\n      middle: middle,\r\n      bottom: bottom\r\n    }\r\n\r\n    this.props.addText(data);\r\n  }\r\n  render() {\r\n      const { secondaryClassname } = this.props;\r\n      const { showTextForm, top, bottom, middle } = this.state;\r\n    return (\r\n      <div className={`paintBrush ${secondaryClassname}`}>\r\n      {showTextForm ? (\r\n        <form className=\"textForm\" onSubmit={this.addText}>\r\n          <input type=\"text\" name=\"top\" value={top} onChange={this.inputText}/>\r\n          <input type=\"text\" name=\"middle\" value={middle} onChange={this.inputText}/>\r\n          <input type=\"text\" name=\"bottom\" value={bottom} onChange={this.inputText}/>\r\n          <button type=\"submit\">Add Text</button>\r\n        </form>\r\n      ) : null }\r\n      {/*  <button onClick={togglePaintMode}>Paint</button> */}\r\n      <button className=\"textButton\" onClick={this.toggleTextForm}>T</button>\r\n      <input type=\"range\" name=\"width\" min=\"3\" max=\"100\" value={this.props.paint.width} step=\"1\" className=\"strokeWidth\" onChange={(e) => this.props.changeBrushWidth(e.target.value)} />\r\n        <input type=\"color\" name=\"color\" value={this.props.paint.color}  onChange={(e) => this.props.changeBrushColor(e.target.value)} className=\"strokeColor\" />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  paint: state.paint\r\n})\r\n\r\nexport default connect(mapStateToProps, { addText, changeBrushWidth, changeBrushColor })(PaintBrush);","import { saveImageState } from './canvasActions';\r\n\r\nexport const addText = data => dispatch => {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = data.ctx;\r\n\r\n    \r\n    const centerX = canvas.width / 2;\r\n    const topY = canvas.height * 0.2;\r\n    const centerY = canvas.height * 0.5;\r\n    const bottomY = canvas.height * 0.9;\r\n    \r\n    ctx.font = \"50px Impact\";\r\n    ctx.textAlign = \"center\";\r\n    ctx.fillStyle = \"rgba(250, 250, 250, 1)\"\r\n    \r\n    \r\n    if(data.top.length > 0) {\r\n      ctx.fillText(data.top.toUpperCase(), centerX, topY);\r\n    } \r\n    \r\n    if (data.middle.length > 0) {\r\n      ctx.fillText(data.middle.toUpperCase(), centerX, centerY)\r\n    }\r\n    \r\n    if (data.bottom.length > 0) {\r\n      ctx.fillText(data.bottom.toUpperCase(), centerX, bottomY)\r\n    }\r\n    \r\n    let pixels = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    dispatch(saveImageState(pixels));\r\n}","import { TOGGLE_PAINT, CHANGE_BRUSH_WIDTH, CHANGE_BRUSH_COLOR } from './types';\r\nimport { saveImageState } from './canvasActions';\r\n \r\nexport const changeBrushWidth = width => dispatch => {\r\n    dispatch({\r\n        type: CHANGE_BRUSH_WIDTH,\r\n        payload: width\r\n    })\r\n}\r\n\r\nexport const changeBrushColor = color => dispatch => {\r\n    dispatch({\r\n        type: CHANGE_BRUSH_COLOR,\r\n        payload: color\r\n    })\r\n}\r\n\r\nexport const togglePaintMode = () => dispatch => {\r\n    const canvas = document.getElementById(\"canvas\");\r\n    const ctx = canvas.getContext('2d');\r\n    let pixels = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    dispatch({\r\n        type: TOGGLE_PAINT\r\n    })\r\n    dispatch(saveImageState(pixels));\r\n}\r\n\r\nexport const applyPaint = paintData => () => {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    let canvasXbounding = canvas.getBoundingClientRect().x;\r\n    let canvasYbounding = canvas.getBoundingClientRect().y;\r\n    let mouseXposition = paintData.clientX - canvasXbounding;\r\n    let mouseYposition = paintData.clientY - canvasYbounding;\r\n    \r\n    ctx.strokeStyle = paintData.color;\r\n    ctx.lineWidth = paintData.width;\r\n    ctx.lineJoin = 'round';\r\n    ctx.lineCap = 'round';\r\n    ctx.beginPath();\r\n\r\n    ctx.moveTo(paintData.mouseX, paintData.mouseY);\r\n    ctx.lineTo(mouseXposition, mouseYposition );\r\n\r\n    ctx.stroke();\r\n\r\n}","import React, { Component } from 'react'\r\n\r\nclass MobileTools extends Component {\r\n  render() {\r\n    const { children } = this.props;\r\n    return (\r\n      <div className=\"mobileTools\">\r\n        {children}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MobileTools;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addSticker } from '../../actions/stickerActions';\r\nimport { addFilter, addBrightness, decreaseBrightness } from '../../actions/filterActions';\r\nimport { saveImage, saveImageState, decrementActiveImageState, incrementActiveImageState } from '../../actions/canvasActions';\r\n\r\nimport StickerContainer from '../stickerContainer/StickerContainer';\r\nimport FilterContainer from '../filterContainer/FilterContainer';\r\nimport MobileTools from './MobileTools';\r\nimport PaintBrush from '../paintBrush/PaintBrush';\r\nimport { icons } from '../../icons';\r\n\r\nclass MobileToolbar extends Component {\r\n  state = {\r\n    showFilters: false,\r\n    showStickers: false,\r\n    showMobileTools: false\r\n  }\r\n\r\n  toggleMenus = (e) => {\r\n    const { showFilters, showStickers, showMobileTools } = this.state;\r\n    if(e.target.className === \"showStickers\") {\r\n      this.setState({showStickers: !showStickers, showFilters: false, showMobileTools: false})\r\n    }\r\n\r\n    if(e.target.className === \"showFilters\") {\r\n      this.setState({showFilters: !showFilters, showStickers: false, showMobileTools: false})\r\n    }\r\n\r\n    if(e.target.className === \"showMobileTools\") {\r\n      this.setState({showMobileTools: !showMobileTools, showStickers: false, showFilters: false})\r\n    }\r\n  }\r\n\r\n  addBrightness = () => {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    this.props.addBrightness(ctx);\r\n    let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    this.props.saveImageState(pixelsOriginal);\r\n  }\r\n\r\n  decreaseBrightness = () => {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    this.props.decreaseBrightness(ctx);\r\n    let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n    this.props.saveImageState(pixelsOriginal);\r\n  }\r\n\r\n  async undo () {\r\n    const canvas = document.getElementById('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n      try {\r\n        await this.props.decrementActiveImageState();\r\n        ctx.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState - 1], 0, 0);\r\n      } catch(err) {\r\n        console.log(err);\r\n      }\r\n    }\r\n\r\n    async redo () {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n        try {\r\n          await this.props.incrementActiveImageState();\r\n          ctx.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState - 1], 0, 0);\r\n        } catch(err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n\r\n      addSticker = (e) => {\r\n        const  { mouseX, mouseY } = this.props;\r\n        const { stickerSize, selectedSticker } = this.props.stickers;\r\n       \r\n           let size;\r\n           switch(stickerSize) {\r\n             case 'sm':\r\n               size = 1.5;\r\n               break;\r\n               case 'md':\r\n               size = 2;\r\n               break;\r\n               case 'lg':\r\n               size = 3;\r\n               break;\r\n               case 'xl':\r\n               size = 4;\r\n               break;\r\n               case 'xxl':\r\n               size = 5;\r\n               break;\r\n             default:\r\n             size = 1\r\n           }\r\n       \r\n           const sticker = {\r\n             title: selectedSticker.title,\r\n             src: selectedSticker.src,\r\n             width: selectedSticker.width,\r\n             height: selectedSticker.height,\r\n             x: mouseX,\r\n             y: mouseY,\r\n             size,\r\n             id: new Date().toISOString(),\r\n             isDragging: false\r\n           }\r\n       \r\n           this.props.addSticker(sticker);\r\n         }\r\n         \r\n    addFilter = () => {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      const data = {\r\n        filter: this.props.filters.selectedFilter,\r\n        ctx: ctx\r\n      }\r\n\r\n      this.props.addFilter(data)\r\n      let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      this.props.saveImageState(pixelsOriginal);\r\n    }\r\n\r\n    \r\n    saveImage = () => {\r\n      const canvas = document.getElementById('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n\r\n      const data = {\r\n        ctx: ctx,\r\n        addedStickers: this.props.stickers.addedStickers\r\n      }\r\n\r\n      this.props.saveImage(data);\r\n    }\r\n  render() {\r\n    const { imageUploadHandler, setPaintBrushSettings, paintBrush, textSettings, showTextForm, top, bottom, middle, addText, togglePaintMode } = this.props;\r\n    const { showFilters, showStickers, showMobileTools} = this.state;\r\n    let outputMenu;\r\n\r\n    if(showStickers) {\r\n      outputMenu = <StickerContainer \r\n      />;\r\n    } else if (showFilters) {\r\n      outputMenu = <FilterContainer /> \r\n    } else if (showMobileTools) {\r\n      outputMenu = (\r\n        <MobileTools>\r\n        <button onClick={this.addBrightness} className=\"add\">Brightness +</button>\r\n        <button onClick={this.decreaseBrightness} className=\"decrease\">Brightness -</button>\r\n        <button onClick={this.undo.bind(this)} className=\"undo\">Undo</button>\r\n        <button onClick={this.redo.bind(this)} className=\"redo\">Redo</button>\r\n        <button onClick={this.saveImage}> <img src={icons.save} alt=\"save\"/> Save</button>\r\n        <PaintBrush togglePaintMode={togglePaintMode} setPaintBrushSettings={setPaintBrushSettings} paintBrush={paintBrush}  textSettings={textSettings} showTextForm={showTextForm} top={top} bottom={bottom} middle={middle} addText={addText} secondaryClassname=\"forMobile\" />\r\n        </MobileTools>\r\n      )\r\n    }else {\r\n      outputMenu = null;\r\n    }\r\n    return (\r\n      <div className=\"mobileToolbar\">\r\n        {outputMenu}\r\n        <button onClick={this.toggleMenus} className=\"showMobileTools\">Tools</button>\r\n        <button onClick={this.toggleMenus} className=\"showStickers\">Stickers</button>\r\n        <button onClick={this.addSticker}>Add Sticker</button>\r\n        <button onClick={this.toggleMenus} className=\"showFilters\">Filters</button>\r\n        <button onClick={this.addFilter}>Add Filter</button>\r\n        <label className=\"fileContainer\">\r\n      <img src={icons.camera} alt=\"camera\"/>\r\n      Click to choose an image\r\n      <input type=\"file\" name=\"image\" onChange={imageUploadHandler} accept=\"image/png\" /> \r\n      </label>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  canvas: state.canvas,\r\n  stickers: state.stickers,\r\n  filters: state.filters\r\n})\r\n\r\nexport default connect(mapStateToProps, { addSticker, addFilter, addBrightness, decreaseBrightness, saveImage, saveImageState, decrementActiveImageState, incrementActiveImageState  })(MobileToolbar);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { deleteSticker, saveNewStickerCordinates } from '../../actions/stickerActions';\r\n\r\nclass StickerComp extends Component {\r\n    state = {\r\n        dragging: false,\r\n        cordinatesX: window.innerWidth / 2,\r\n        cordinatesY: window.innerHeight / 2\r\n    }\r\n\r\n    dragSticker = (e) => {\r\n        const { sticker, canvasXbounding, canvasYbounding, canvasRightBounding, canvasBottomBounding } = this.props;\r\n        const { dragging } = this.state;\r\n        \r\n        \r\n  \r\n\r\n        if(dragging) {\r\n        \r\n    \r\n            if(e.clientX - sticker.width < canvasXbounding) {\r\n                this.setState({cordinatesX: canvasXbounding});\r\n            } else if(e.clientX + sticker.width > canvasRightBounding) {\r\n                this.setState({cordinatesX: canvasRightBounding - (sticker.width * 2)});\r\n            } else if(e.clientY - sticker.height < canvasYbounding) {\r\n                this.setState({cordinatesY: canvasYbounding})\r\n            } else if(e.clientY + sticker.height > canvasBottomBounding) {\r\n                this.setState({cordinatesY: canvasBottomBounding - (sticker.height * 2)})\r\n            }\r\n\r\n            \r\n            else {\r\n                this.setState({cordinatesX: e.clientX - sticker.width / 2, cordinatesY: e.clientY - sticker.height / 2});\r\n            }\r\n            \r\n        }\r\n\r\n        \r\n        if(e.touches) {\r\n            const canvas = document.getElementById(\"canvas\");\r\n            let canvasXbounding = canvas.getBoundingClientRect().x;\r\n            let canvasYbounding = canvas.getBoundingClientRect().y;\r\n            let canvasRightBounding = canvas.getBoundingClientRect().right;\r\n            let canvasBottomBounding = canvas.getBoundingClientRect().bottom;\r\n\r\n            if(e.touches[0].clientX - sticker.width < canvasXbounding) {\r\n                this.setState({cordinatesX: canvasXbounding});\r\n            } else if(e.touches[0].clientX + sticker.width > canvasRightBounding) {\r\n                this.setState({cordinatesX: canvasRightBounding - (sticker.width * 2)});\r\n            } else if(e.touches[0].clientY - sticker.height < canvasYbounding) {\r\n                this.setState({cordinatesY: canvasYbounding})\r\n            } else if(e.touches[0].clientY + sticker.height > canvasBottomBounding) {\r\n                this.setState({cordinatesY: canvasBottomBounding - (sticker.height * 2)})\r\n            }\r\n\r\n            else {\r\n                this.setState({cordinatesX: e.touches[0].clientX - sticker.width / 2, cordinatesY: e.touches[0].clientY - sticker.height / 2});\r\n            }\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    saveNewCordinates = () => {\r\n        const { sticker } = this.props;\r\n        const { cordinatesX, cordinatesY } = this.state;\r\n\r\n        const stickerData = {\r\n            id: sticker.id,\r\n            x: cordinatesX,\r\n            y: cordinatesY\r\n        }\r\n\r\n        this.setState({ dragging: false});\r\n\r\n        this.props.saveNewStickerCordinates(stickerData)\r\n    }\r\n\r\n    toggleDrag = () => {\r\n        const { dragging } = this.state;\r\n        this.setState({dragging: !dragging });\r\n    }\r\n\r\n    render() {\r\n        const { dragging, cordinatesX, cordinatesY } = this.state;\r\n        const {sticker, deleteSticker } = this.props;  \r\n\r\n  return (\r\n    <div>\r\n        <img key={sticker.id} src={sticker.src} alt=\"sticker\" style={{position: 'absolute', width: `${sticker.width * sticker.size}px`, height: `${sticker.height * sticker.size}px`,  top: `${cordinatesY}px`, left: `${cordinatesX}px`, zIndex: '1050', border: `${dragging ? '1px solid red' : 'none'}`}} id={sticker.id}  onClick={this.toggleDrag} onMouseMove={this.dragSticker} onMouseLeave={this.saveNewCordinates} onDoubleClick={() => deleteSticker(sticker.id)} draggable=\"true\"\r\n        onTouchMove={this.dragSticker} onTouchEnd={this.saveNewCordinates}/>\r\n    </div>\r\n  )\r\n    }\r\n}\r\nexport default connect(null, { deleteSticker, saveNewStickerCordinates })(StickerComp);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { setCanvasRef, handleMouseMove, uploadMainImg, saveImageState } from './actions/canvasActions';\r\nimport { togglePaintMode, applyPaint } from './actions/paintActions';\r\n\r\nimport StickerContainer from './components/stickerContainer/StickerContainer';\r\nimport FilterContainer from './components/filterContainer/FilterContainer';\r\nimport Buttons from './components/buttons/Buttons';\r\nimport PaintBrush from './components/paintBrush/PaintBrush';\r\nimport MobileToolbar from './components/mobileToolbar/MobileToolbar';\r\nimport './App.scss';\r\nimport StickerComp from './components/stickerContainer/StickerComp';\r\n\r\n\r\n\r\nclass App extends Component {\r\nstate = {\r\n  mouseX: 0,\r\n  mouseY: 0,\r\n  canvasXbounding: null,\r\n  canvasYbounding: null,\r\n  canvasRightBounding: null,\r\n  canvasBottomBounding: null,\r\n  mobileWindowHeight: null,\r\n  mobileWindowWidth: null,\r\n  uploadedImage: null,\r\n  orientationNumber: 0,\r\n  originalPhoto: null,\r\n  mobile: null\r\n}\r\n componentDidMount() {\r\n   \r\n   //this.props.setCanvasRef(this.refs.canvas);\r\n   const canvas = this.refs.canvas;\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  let canvasXbounding = canvas.getBoundingClientRect().x;\r\n  let canvasYbounding = canvas.getBoundingClientRect().y;\r\n  let canvasRightBounding = canvas.getBoundingClientRect().right;\r\n  let canvasBottomBounding = canvas.getBoundingClientRect().bottom;\r\n   \r\n   const { mobile } = this.state;\r\n  \r\n   \r\n   function isMobileDevice() {\r\n    return (typeof window.orientation !== \"undefined\") || (navigator.userAgent.indexOf('IEMobile') !== -1);\r\n};\r\n\r\n  if(isMobileDevice() === true) {\r\n    console.log('User is on a mobile device, adjusting the canvas size')\r\n    this.setState({mobile: true, mobileWindowHeight: window.innerHeight * 0.8, mobileWindowWidth: window.innerWidth});\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight * 0.8;\r\n  } \r\n\r\n   this.setState({mouseX: canvasXbounding + (canvas.width / 2), mouseY: canvasYbounding + (canvas.height / 2), canvasXbounding: canvasXbounding, canvasYbounding: canvasYbounding, canvasRightBounding: canvasRightBounding, canvasBottomBounding: canvasBottomBounding})\r\n\r\n  let canvasX = canvas.width / 2;\r\n  let canvasY = canvas.height / 2;\r\n  let canvasXmobile = canvas.width / 2 - 60;\r\n\r\n  const welcomeText = (font, x, y) => {\r\n  ctx.font = `${font}px Arial`;\r\n  ctx.textAlign = \"center\";\r\n  ctx.fillStyle = \"rgba(150, 150, 150, 1)\"\r\n  ctx.fillText(\"Choose An Image To Edit\", x, canvasY); \r\n  }\r\n\r\n  window.onload = () => {\r\n    if(mobile) {\r\n      welcomeText(20, canvasXmobile);\r\n    } else {\r\n      welcomeText(30, canvasX);\r\n    }\r\n  }\r\n}\r\n  \r\n  imageUploadHandler = e => {\r\n    this.setState({uploadedImage: URL.createObjectURL(e.target.files[0])})\r\n    setTimeout(() => this.uploadMainImg(), 100) \r\n  }\r\n  \r\n  handleMouseMove = e => {\r\n    const { paint } = this.props;\r\n    const { mouseY, mouseX } = this.state;\r\n\r\n    if(paint.paint) {\r\n\r\n      const paintData = {\r\n        mouseX: mouseX,\r\n        mouseY: mouseY,\r\n        color: paint.color,\r\n        width: paint.width,\r\n        clientX: e.clientX,\r\n        clientY: e.clientY\r\n      }\r\n\r\n      this.props.applyPaint(paintData);\r\n    }\r\n    const canvas = this.refs.canvas;\r\n    const rect = canvas.getBoundingClientRect()\r\n    this.setState({mouseX: e.clientX - rect.left, mouseY: e.clientY - rect.y})\r\n  }\r\n\r\n  handleTouchPaint = e => {\r\n    const { paint } = this.props;\r\n    const { mouseY, mouseX } = this.state;\r\n\r\n\r\n    const canvas = this.refs.canvas;\r\n    const rect = canvas.getBoundingClientRect()\r\n\r\n    if(this.props.paint.paint) {\r\n      this.setState({mouseX: e.touches[0].clientX - rect.left, mouseY: e.touches[0].clientY - rect.y})\r\n\r\n      const paintData = {\r\n        mouseX: mouseX,\r\n        mouseY: mouseY,\r\n        color: paint.color,\r\n        width: paint.width,\r\n        clientX: e.touches[0].clientX,\r\n        clientY: e.touches[0].clientY\r\n      }\r\n\r\n      this.props.applyPaint(paintData);\r\n    \r\n      this.setState({mouseX: e.touches[0].clientX - rect.left, mouseY: e.touches[0].clientY - rect.y})\r\n    }\r\n\r\n  }\r\n\r\n  togglePaintMobile = e => {\r\n\r\n    const canvas = this.refs.canvas;\r\n    const rect = canvas.getBoundingClientRect()    \r\n    this.props.togglePaintMode()\r\n    this.setState({mouseX: e.touches[0].clientX - rect.left, mouseY: e.touches[0].clientY - rect.y})\r\n  }\r\n   \r\n  setMouseCordinates = e => {\r\n      this.setState({mouseX: e.clientX, mouseY: e.clientY})\r\n      return;\r\n  }\r\n  \r\n  async uploadMainImg () {\r\n    const { uploadedImage } = this.state;\r\n    const canvas = this.refs.canvas;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    const data = {\r\n      ctx: ctx,\r\n      imageData: uploadedImage\r\n    }\r\n\r\n    await this.props.uploadMainImg(data);\r\n   \r\n    try {\r\n      let pixelsOriginal = ctx.getImageData(0, 0, canvas.width, canvas.height);\r\n      this.props.saveImageState(pixelsOriginal);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n      \r\n    \r\n\r\n\r\n  }\r\n\r\n  render() {\r\n    const { uploadedImage, paintBrush, showTextForm, top, bottom, middle, mobile, mouseX, mouseY, canvasXbounding, canvasYbounding, canvasRightBounding, canvasBottomBounding, mobileWindowHeight, mobileWindowWidth } = this.state;\r\n    const { addedStickers } = this.props.stickers;\r\n    const canvas = React.createRef()\r\n\r\n\r\n    \r\n    return (\r\n     \r\n        <div className=\"App\">\r\n          <div className=\"topPart\">\r\n            <StickerContainer secondaryClassname=\"forDesktop\"/>\r\n            <PaintBrush togglePaintMode={this.togglePaintMode} setPaintBrushSettings={this.setPaintBrushSettings} paintBrush={paintBrush}  textSettings={this.textSettings} showTextForm={showTextForm} top={top} bottom={bottom} middle={middle} addText={this.addText} secondaryClassname=\"forDesktop\" />\r\n          <canvas ref=\"canvas\" id=\"canvas\" width={mobile ? mobileWindowWidth : 500} height={mobile ? mobileWindowHeight : 500} onMouseEnter={this.handleMouseMove} onMouseDown={this.props.togglePaintMode}  onMouseUp={this.props.togglePaintMode} /*onMouseMove={this.paint}*/ onMouseMove={this.handleMouseMove} onClick={this.setMouseCordinates}  onTouchEnd={this.props.togglePaintMode} onTouchStart={this.togglePaintMobile} onTouchMove={this.handleTouchPaint} className=\"canvas\"></canvas>\r\n          {addedStickers.length > 0 && addedStickers !== undefined ? addedStickers.map(sticker => (\r\n            <StickerComp sticker={sticker} mouseX={mouseX} mouseY={mouseY} canvasXbounding={canvasXbounding} canvasYbounding={canvasYbounding} canvasRightBounding={canvasRightBounding} canvasBottomBounding={canvasBottomBounding}/>\r\n          )): null }\r\n          <FilterContainer  secondaryClassname=\"forDesktop\"/>\r\n          </div>\r\n          <Buttons \r\n          adjustBrightness={this.adjustBrightness} \r\n          imageUploadHandler={this.imageUploadHandler}\r\n          secondaryClassname=\"forDesktop\"\r\n          mouseX={mouseX}\r\n          mouseY={mouseY}\r\n          />\r\n          {uploadedImage !== null ? <img src={uploadedImage} ref=\"mainImg\" id=\"mainImg\" alt=\"mainImg\" style={{display: 'none'}}/> : null }\r\n          <div className=\"forMobile\">\r\n           { <MobileToolbar\r\n            imageUploadHandler={this.imageUploadHandler}\r\n            mouseX={mouseX}\r\n            mouseY={mouseY}\r\n          />}\r\n          </div>\r\n        </div>\r\n    \r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  canvas: state.canvas,\r\n  stickers: state.stickers,\r\n  paint: state.paint\r\n})\r\n\r\nexport default connect(mapStateToProps, { setCanvasRef, handleMouseMove, uploadMainImg, togglePaintMode, applyPaint, saveImageState })(App);\r\n","import glasses1 from './glasses1.svg';\r\nimport glasses2 from './glasses2.svg';\r\nimport glasses3 from './glasses3.svg';\r\nimport grin1 from './grin1PNG.svg';\r\nimport tear1 from './tear1.svg';\r\nimport sad1 from './sad1.svg';\r\nimport smirk1 from './smirk1PNG.svg';\r\nimport unibrow1 from './unibrow1.svg';\r\nimport teehee from './teehee.svg';\r\nimport lol from './lol.svg';\r\nimport zzz from './zzz.svg';\r\nimport awesome from './awesome.svg';\r\nimport cool from './cool.svg';\r\nimport exclamation from './exclamation.svg';\r\nimport question from './question.svg';\r\nimport dollar from './dollar.svg';\r\nimport euro from './euro.svg';\r\nimport britishPound from './britishPound.svg';\r\n\r\n\r\n\r\n\r\n// NOTE ALL THE STICKERS HAVE TO BE 50x20 size\r\n\r\nexport const stickers = [\r\n    // HEADWEAR STICKERS\r\n    {\r\n        title: 'glasses1',\r\n        src: glasses1,\r\n        height: 20,\r\n        width: 50\r\n    },\r\n    {\r\n        title: 'glasses2',\r\n        src: glasses2,\r\n        height: 20,\r\n        width: 50\r\n    },\r\n    {\r\n        title: 'glasses3',\r\n        src: glasses3,\r\n        height: 20,\r\n        width: 50\r\n    },\r\n    // TEXT STICKERS\r\n    {\r\n        title: 'teehee',\r\n        src: teehee,\r\n        height: 40,\r\n        width: 100\r\n    },\r\n    {\r\n        title: 'lol',\r\n        src: lol,\r\n        height: 40,\r\n        width: 100\r\n    },\r\n    {\r\n        title: 'zzz',\r\n        src: zzz,\r\n        height: 40,\r\n        width: 100\r\n    },\r\n    {\r\n        title: 'awesome',\r\n        src: awesome,\r\n        height: 41,\r\n        width: 158\r\n    },\r\n    {\r\n        title: 'cool',\r\n        src: cool,\r\n        height: 67,\r\n        width: 98\r\n    },\r\n    {\r\n        title: 'exclamation',\r\n        src: exclamation,\r\n        height: 67,\r\n        width: 15\r\n    },\r\n    {\r\n        title: 'question',\r\n        src: question,\r\n        height: 67,\r\n        width: 31\r\n    },\r\n    {\r\n        title: 'dollar',\r\n        src: dollar,\r\n        height: 67,\r\n        width: 31\r\n    },\r\n    {\r\n        title: 'euro',\r\n        src: euro,\r\n        height: 67,\r\n        width: 31\r\n    },\r\n    {\r\n        title: 'britishPound',\r\n        src: britishPound,\r\n        height: 67,\r\n        width: 31\r\n    },\r\n    // EMOJI STICKERS\r\n    {\r\n        title: 'grin1',\r\n        src: grin1,\r\n        height: 20,\r\n        width: 50\r\n    },\r\n    {\r\n        title: 'tear1',\r\n        src: tear1,\r\n        height: 34,\r\n        width: 20.5\r\n    },\r\n    {\r\n        title: 'sad1',\r\n        src: sad1,\r\n        height: 16,\r\n        width: 28\r\n    },\r\n    {\r\n        title: 'smirk1',\r\n        src: smirk1,\r\n        height: 10,\r\n        width: 30\r\n    },\r\n    {\r\n        title: 'unibrow1',\r\n        src: unibrow1,\r\n        height: 9,\r\n        width: 48\r\n    }\r\n] ","import { SELECT_STICKER, SELECT_STICKER_SIZE, ADD_STICKER, DELETE_STICKER, SAVE_NEW_STICKER_CORDINATES } from '../actions/types';\r\n\r\nimport { stickers } from '../components/stickerContainer/stickerSvgs/';\r\n\r\n\r\nconst initialState = {\r\n    stickers: stickers,\r\n    stickerSize: 'md',\r\n    selectedSticker: stickers[0],\r\n    addedStickers: []\r\n}\r\n\r\nexport default function stickerReducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case SELECT_STICKER: \r\n            return {\r\n                ...state,\r\n                selectedSticker: action.payload\r\n            }\r\n        case SELECT_STICKER_SIZE: \r\n            return {\r\n                ...state,\r\n                stickerSize: action.payload\r\n            }\r\n        case SAVE_NEW_STICKER_CORDINATES:\r\n            const stickerData = action.payload;\r\n            const newStickerData = state.addedStickers.map((sticker) => {\r\n                if(stickerData.id === sticker.id) {\r\n                    sticker.x = stickerData.x;\r\n                    sticker.y = stickerData.y;\r\n                    return sticker;\r\n                } else {\r\n                    return sticker\r\n                }\r\n            })\r\n            return {\r\n                ...state,\r\n                addedStickers: newStickerData\r\n            }\r\n        case ADD_STICKER: \r\n            return {\r\n                ...state,\r\n                addedStickers: state.addedStickers.concat(action.payload)\r\n            }\r\n        case DELETE_STICKER:\r\n            return {\r\n                ...state,\r\n                addedStickers: state.addedStickers.filter(sticker => sticker.id !== action.payload)\r\n            }     \r\n        default:\r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}","import { SET_CANVAS_REF, HANDLE_MOUSE_MOVE, UPLOAD_MAIN_IMG, SAVE_IMAGE_STATE, DECREMENT_ACTIVE_IMAGE_STATE, INCREMENT_ACTIVE_IMAGE_STATE } from '../actions/types';\r\n\r\nconst initialState = {\r\n    loading: true,\r\n    mouseX: 0,\r\n    mouseY: 0,\r\n    ctx: null,\r\n    imageState: [],\r\n    activeImageState: 0\r\n}\r\n\r\nexport default function canvasReducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case HANDLE_MOUSE_MOVE: \r\n           \r\n            return {\r\n                ...state\r\n            }\r\n        case SET_CANVAS_REF: \r\n            return {\r\n                ...state,\r\n                canvasRef: action.payload,\r\n                loading: false\r\n            }\r\n        case UPLOAD_MAIN_IMG: \r\n        console.log(action.payload)\r\n            return {\r\n                ...state,\r\n                ctx: action.payload\r\n            }\r\n        case SAVE_IMAGE_STATE: \r\n            return {\r\n                ...state,\r\n                imageState: state.imageState.concat(action.payload),\r\n                activeImageState: state.activeImageState += 1\r\n            }\r\n        case DECREMENT_ACTIVE_IMAGE_STATE: \r\n            const decState = state.activeImageState;\r\n            if(decState === 0) {\r\n                return {\r\n                    ...state,\r\n                    activeImageState: 1\r\n                }\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    activeImageState:state.activeImageState -= 1\r\n                }\r\n            }\r\n        case INCREMENT_ACTIVE_IMAGE_STATE:\r\n            return {\r\n                ...state,\r\n                activeImageState: state.activeImageState > state.imageState.length - 1 ? state.imageState.length : state.activeImageState + 1\r\n            }            \r\n\r\n        default: \r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}","import { filters } from '../components/filterContainer/';\r\nimport { SELECT_FILTER } from '../actions/types';\r\n\r\nconst initialState = {\r\n    filters: null,\r\n    selectedFilter: filters[0]\r\n};\r\n\r\nexport default function filterReducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case SELECT_FILTER:\r\n            return {\r\n                ...state,\r\n                selectedFilter: action.payload\r\n            }\r\n        default: \r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}","const initalState = {\r\n    top: '',\r\n    middle: '',\r\n    bottom: ''\r\n}\r\n\r\nexport default function textReducer(state = initalState, action) {\r\n    switch(action) {\r\n        default: \r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}","import { TOGGLE_PAINT, CHANGE_BRUSH_WIDTH, CHANGE_BRUSH_COLOR } from '../actions/types';\r\n\r\nconst initialState = {\r\n    paint: false,\r\n    color: '#00a6fb',\r\n    width: 5\r\n}\r\n\r\nexport default function paintReducer(state = initialState, action) {\r\n    switch(action.type) {\r\n        case CHANGE_BRUSH_WIDTH: \r\n            return {\r\n                ...state,\r\n                width: action.payload\r\n            }\r\n        case CHANGE_BRUSH_COLOR:\r\n            return {\r\n                ...state,\r\n                color: action.payload\r\n            }\r\n        case TOGGLE_PAINT: \r\n            return {\r\n                ...state,\r\n                paint: !state.paint\r\n            }    \r\n        default:\r\n            return {\r\n                ...state\r\n            }\r\n    }\r\n}","import { combineReducers } from 'redux';\r\nimport stickerReducer from './stickerReducer';\r\nimport canvasReducer from './canvasReducer';\r\nimport filterReducer from './filterReducer';\r\nimport textReducer from './textReducer';\r\nimport paintReducer from './paintReducer';\r\n\r\nexport default combineReducers({\r\n    stickers: stickerReducer,\r\n    canvas: canvasReducer,\r\n    filters: filterReducer,\r\n    text: textReducer,\r\n    paint: paintReducer\r\n});\r\n\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport rootReducer from './reducers';\r\n\r\nimport thunk from 'redux-thunk'\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\n\r\n// const composerEnchancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n    rootReducer,\r\n    initialState,\r\n    /*composerEnchancers(\r\n        applyMiddleware(...middleware)\r\n    )*/\r\n    applyMiddleware(...middleware)\r\n)\r\n\r\nexport default store;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nimport store from './store';\r\n\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nserviceWorker.register();\r\nReactDOM.render((\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>\r\n), document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\n"],"sourceRoot":""}