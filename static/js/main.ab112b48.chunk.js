(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(20).concat([function(t,e,a){t.exports=a.p+"static/media/camera.e1513c0e.svg"},function(t,e,a){t.exports=a.p+"static/media/save.08042235.svg"},function(t,e,a){t.exports=a.p+"static/media/glasses1.e3c0de2a.svg"},function(t,e,a){t.exports=a.p+"static/media/glasses2.008b698c.svg"},function(t,e,a){t.exports=a.p+"static/media/glasses3.de98151c.svg"},function(t,e,a){t.exports=a.p+"static/media/grin1PNG.90f2c051.svg"},function(t,e,a){t.exports=a.p+"static/media/tear1.4c79d8f4.svg"},function(t,e,a){t.exports=a.p+"static/media/sad1.2adb5c86.svg"},function(t,e,a){t.exports=a.p+"static/media/smirk1PNG.ab9aeb72.svg"},function(t,e,a){t.exports=a.p+"static/media/unibrow1.7381bf4b.svg"},function(t,e,a){t.exports=a.p+"static/media/teehee.d2211d63.svg"},function(t,e,a){t.exports=a.p+"static/media/lol.252b2af4.svg"},function(t,e,a){t.exports=a.p+"static/media/zzz.724a58af.svg"},function(t,e,a){t.exports=a.p+"static/media/awesome.260ab8ee.svg"},function(t,e,a){t.exports=a.p+"static/media/cool.477ba34c.svg"},function(t,e,a){t.exports=a.p+"static/media/exclamation.88226d08.svg"},function(t,e,a){t.exports=a.p+"static/media/question.eb720450.svg"},function(t,e,a){t.exports=a.p+"static/media/dollar.0a798ebe.svg"},function(t,e,a){t.exports=a.p+"static/media/euro.4758b5c6.svg"},function(t,e,a){t.exports=a.p+"static/media/britishPound.b897a7a1.svg"},,function(t,e,a){t.exports=a(57)},,,,,,,,,,function(t,e,a){},,,,function(t,e,a){},,function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(18),s=a.n(o),r=a(6),c=(a(51),a(2)),l=a.n(c),d=a(9),u=a(3),h=a(4),g=a(7),m=a(5),p=a(8),v="SET_CANVAS_REF",f="UPLOAD_MAIN_IMG",b="HANDLE_MOUSE_MOVE",w="SAVE_IMAGE_STATE",S="DECREMENT_ACTIVE_IMAGE_STATE",k="INCREMENT_ACTIVE_IMAGE_STATE",y="SELCET_STICKER",E="SELECT_STICKER_SIZE",x="ADD_STICKER",I="DELETE_STICKER",C="SAVE_NEW_STICKER_CORDINATES",B="SELECT_FILTER",O="TOGGLE_PAINT",j="CHANGE_BRUSH_WIDTH",T="CHANGE_BRUSH_COLOR",M=function(t){return function(){for(var e=document.getElementById("canvas"),a=t.ctx,n=e.getBoundingClientRect().x,i=e.getBoundingClientRect().y,o=t.addedStickers,s=a.getImageData(0,0,e.width,e.height),r=function(t){var e=new Image;e.src=o[t].src,e.onload=function(){a.drawImage(e,o[t].x-n,o[t].y-i,o[t].width*o[t].size,o[t].height*o[t].size)}},c=0;c<o.length;c++)r(c);setTimeout(function(){var t=document.createElement("a");t.className="modalSave";var n=document.createElement("img"),i=function(t){var e,a,n,i=t.getContext("2d"),o=document.createElement("canvas").getContext("2d"),s=i.getImageData(0,0,t.width,t.height),r=s.data.length,c={top:null,left:null,right:null,bottom:null};for(e=0;e<r;e+=4)0!==s.data[e+3]&&(a=e/4%t.width,n=~~(e/4/t.width),null===c.top&&(c.top=n),null===c.left?c.left=a:a<c.left&&(c.left=a),null===c.right?c.right=a:c.right<a&&(c.right=a),null===c.bottom?c.bottom=n:c.bottom<n&&(c.bottom=n));var l=c.bottom-c.top,d=c.right-c.left,u=i.getImageData(c.left,c.top,d,l);return o.canvas.width=d,o.canvas.height=l,o.putImageData(u,0,0),o.canvas}(e);n.src=i.toDataURL(),t.innerHTML="Download image",t.appendChild(n),t.style.height="".concat(i.height+30,"px"),t.addEventListener("click",function(e){t.href=i.toDataURL(),t.download="FilterMatic".concat((new Date).toISOString(),".png"),t.remove()},!1),document.body.appendChild(t),document.body.addEventListener("click",function(){a.putImageData(s,0,0),t.remove()})},300)}},N=function(t){return function(e){e({type:w,payload:t})}},A=function(){return function(t){t({type:S})}},D=function(){return function(t){t({type:k})}},X=function(t){return function(e){e({type:x,payload:t})}},Y=function(t){function e(){return Object(u.a)(this,e),Object(g.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this,e=this.props.secondaryClassname,a=this.props.stickers,n=a.selectedSticker,o=a.stickers.map(function(e){return i.a.createElement("img",{key:e.title,src:e.src,alt:"sticker",onClick:function(){return t.props.selectSticker(e)},className:n.title===e.title?"selected":null})});return i.a.createElement("div",{className:"stickerContainer ".concat(e)},i.a.createElement("div",{className:"infoAndSelectors"},i.a.createElement("h3",null,"Stickers"),i.a.createElement("select",{name:"stickerSize",onChange:function(e){return t.props.selectStickerSize(e.target.value)}},i.a.createElement("option",{value:"sm"},"Small"),i.a.createElement("option",{selected:!0,value:"md"},"Medium"),i.a.createElement("option",{value:"lg"},"Large"),i.a.createElement("option",{value:"xl"},"Extra Large"),i.a.createElement("option",{value:"xxl"},"Extra extra Large"))),i.a.createElement("div",{className:"stickers"},o))}}]),e}(n.Component),R=Object(r.b)(function(t){return{stickers:t.stickers}},{selectSticker:function(t){return function(e){e({type:y,payload:t})}},selectStickerSize:function(t){return function(e){e({type:E,payload:t})}}})(Y),F=function(t){return function(){for(var e=document.getElementById("canvas"),a=t.ctx,n=a.getImageData(0,0,e.width,e.height),i=0;i<n.data.length;i+=4)n.data[i+0]=n.data[i+0]+t.filter.r,n.data[i+1]=n.data[i+1]+t.filter.g,n.data[i+2]=n.data[i+2]+t.filter.b;a.putImageData(n,0,0)}},P=function(t){return function(){for(var e=document.getElementById("canvas"),a=t.getImageData(0,0,e.width,e.height),n=0;n<a.data.length;n+=4)a.data[n+0]=a.data[n+0]+10,a.data[n+1]=a.data[n+1]+10,a.data[n+2]=a.data[n+2]+10;t.putImageData(a,0,0)}},_=function(t){return function(){for(var e=document.getElementById("canvas"),a=t.getImageData(0,0,e.width,e.height),n=0;n<a.data.length;n+=4)a.data[n+0]=a.data[n+0]-10,a.data[n+1]=a.data[n+1]-10,a.data[n+2]=a.data[n+2]-10;t.putImageData(a,0,0)}},U=[{title:"lightBlue",r:0,g:-7,b:35.5},{title:"Brilliant Lavander",r:6,g:-36,b:15},{title:"Camouflage Green",r:0,g:14,b:-13},{title:"Azure Mist",r:15,g:30,b:30},{title:"Amber",r:5,g:-49,b:-70},{title:"Alien",r:-28,g:2,b:-58},{title:"Cool Green",r:-91,g:15,b:-36},{title:"Snow",r:55,g:50,b:50},{title:"Sky Blue",r:-65,g:6,b:15},{title:"Lime",r:-50,g:5,b:-50},{title:"Hot Pink",r:25,g:-25,b:0},{title:"Turquoise",r:-100,g:16,b:19}],W=function(t){function e(){return Object(u.a)(this,e),Object(g.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this.props,e=t.selectFilter,a=t.secondaryClassname,n=this.props.filters.selectedFilter,o=U.map(function(t){return i.a.createElement("div",{key:t.title,onClick:function(){return e(t)},style:(n.title,t.title,{background:"rgba(".concat(t.r+100,", ").concat(t.g+100,", ").concat(t.b+100,", 0.5)")}),className:n.title===t.title?"selected filter":"filter"},t.title)});return i.a.createElement("div",{className:"filterContainer ".concat(a)},i.a.createElement("div",{className:"infoAndSelectors"},i.a.createElement("h3",null,"Filters")),i.a.createElement("div",{className:"filters"},o))}}]),e}(n.Component),L=Object(r.b)(function(t){return{filters:t.filters}},{selectFilter:function(t){return function(e){e({type:B,payload:t})}}})(W),z=a(20),H=a.n(z),G=a(21),V=a.n(G),K={camera:H.a,save:V.a},q=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).addSticker=function(t){var e,n=a.props,i=n.mouseX,o=n.mouseY,s=a.props.stickers,r=s.stickerSize,c=s.selectedSticker;switch(r){case"sm":e=1.5;break;case"md":e=2;break;case"lg":e=3;break;case"xl":e=4;break;case"xxl":e=5;break;default:e=1}var l={title:c.title,src:c.src,width:c.width,height:c.height,x:i,y:o,size:e,id:(new Date).toISOString(),isDragging:!1};a.props.addSticker(l)},a.addBrightness=function(){var t=document.getElementById("canvas"),e=t.getContext("2d");a.props.addBrightness(e);var n=e.getImageData(0,0,t.width,t.height);a.props.saveImageState(n)},a.decreaseBrightness=function(){var t=document.getElementById("canvas"),e=t.getContext("2d");a.props.decreaseBrightness(e);var n=e.getImageData(0,0,t.width,t.height);a.props.saveImageState(n)},a.saveImage=function(){var t={ctx:document.getElementById("canvas").getContext("2d"),addedStickers:a.props.stickers.addedStickers};a.props.saveImage(t)},a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"addFilter",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a,n,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("canvas"),a=e.getContext("2d"),n=a.getImageData(0,0,e.width,e.height),i={filter:this.props.filters.selectedFilter,ctx:a},t.next=6,this.props.addFilter(i);case 6:try{this.props.saveImageState(n)}catch(o){console.log(o)}case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"undo",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("canvas"),a=e.getContext("2d"),t.next=4,this.props.decrementActiveImageState();case 4:try{a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState],0,0)}catch(n){console.log(n)}case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"redo",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("canvas"),a=e.getContext("2d"),t.next=4,this.props.incrementActiveImageState();case 4:try{a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState-1],0,0)}catch(n){console.log(n)}case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props,e=t.imageUploadHandler,a=t.secondaryClassname;return i.a.createElement("div",{className:"buttons ".concat(a)},i.a.createElement("button",{onClick:this.addBrightness,className:"add"},"Brightness +"),i.a.createElement("button",{onClick:this.decreaseBrightness,className:"decrease"},"Brightness -"),i.a.createElement("button",{onClick:this.addSticker},"Add a Sticker"),i.a.createElement("button",{onClick:this.undo.bind(this),className:"undo"},"Undo"),i.a.createElement("button",{onClick:this.redo.bind(this),className:"redo"},"Redo"),i.a.createElement("button",{onClick:this.saveImage,ref:"save"}," ",i.a.createElement("img",{src:K.save,alt:"save"})," Save"),i.a.createElement("button",{onClick:this.addFilter.bind(this)},"Filter"),i.a.createElement("label",{className:"fileContainer"},i.a.createElement("img",{src:K.camera,alt:"camera"}),"Click to choose an image",i.a.createElement("input",{type:"file",name:"image",onChange:e,accept:"image/*"})))}}]),e}(n.Component),J=Object(r.b)(function(t){return{stickers:t.stickers,filters:t.filters,canvas:t.canvas}},{addSticker:X,addFilter:F,addBrightness:P,decreaseBrightness:_,saveImage:M,saveImageState:N,decrementActiveImageState:A,incrementActiveImageState:D})(q),Z=a(13),$=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={showTextForm:!1,top:"",middle:"",bottom:""},a.toggleTextForm=function(){var t=a.state.showTextForm;a.setState({showTextForm:!t})},a.inputText=function(t){a.setState(Object(Z.a)({},t.target.name,t.target.value))},a.addText=function(t){t.preventDefault();var e=a.state,n=e.top,i=e.bottom,o=e.middle,s={ctx:document.getElementById("canvas").getContext("2d"),top:n,middle:o,bottom:i};a.props.addText(s)},a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this,e=this.props.secondaryClassname,a=this.state,n=a.showTextForm,o=a.top,s=a.bottom,r=a.middle;return i.a.createElement("div",{className:"paintBrush ".concat(e)},n?i.a.createElement("form",{className:"textForm",onSubmit:this.addText},i.a.createElement("input",{type:"text",name:"top",value:o,onChange:this.inputText}),i.a.createElement("input",{type:"text",name:"middle",value:r,onChange:this.inputText}),i.a.createElement("input",{type:"text",name:"bottom",value:s,onChange:this.inputText}),i.a.createElement("button",{type:"submit"},"Add Text")):null,i.a.createElement("button",{className:"textButton",onClick:this.toggleTextForm},"T"),i.a.createElement("input",{type:"range",name:"width",min:"3",max:"100",value:this.props.paint.width,step:"1",className:"strokeWidth",onChange:function(e){return t.props.changeBrushWidth(e.target.value)}}),i.a.createElement("input",{type:"color",name:"color",value:this.props.paint.color,onChange:function(e){return t.props.changeBrushColor(e.target.value)},className:"strokeColor"}))}}]),e}(n.Component),Q=Object(r.b)(function(t){return{paint:t.paint}},{addText:function(t){return function(e){var a=document.getElementById("canvas"),n=t.ctx,i=a.width/2,o=.2*a.height,s=.5*a.height,r=.9*a.height;n.font="50px Impact",n.textAlign="center",n.fillStyle="rgba(250, 250, 250, 1)",t.top.length>0&&n.fillText(t.top.toUpperCase(),i,o),t.middle.length>0&&n.fillText(t.middle.toUpperCase(),i,s),t.bottom.length>0&&n.fillText(t.bottom.toUpperCase(),i,r);var c=n.getImageData(0,0,a.width,a.height);e(N(c))}},changeBrushWidth:function(t){return function(e){e({type:j,payload:t})}},changeBrushColor:function(t){return function(e){e({type:T,payload:t})}}})($),tt=function(t){function e(){return Object(u.a)(this,e),Object(g.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this.props.children;return i.a.createElement("div",{className:"mobileTools"},t)}}]),e}(n.Component),et=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={showFilters:!1,showStickers:!1,showMobileTools:!1},a.toggleMenus=function(t){var e=a.state,n=e.showFilters,i=e.showStickers,o=e.showMobileTools;"showStickers"===t.target.className&&a.setState({showStickers:!i,showFilters:!1,showMobileTools:!1}),"showFilters"===t.target.className&&a.setState({showFilters:!n,showStickers:!1,showMobileTools:!1}),"showMobileTools"===t.target.className&&a.setState({showMobileTools:!o,showStickers:!1,showFilters:!1})},a.addBrightness=function(){var t=document.getElementById("canvas"),e=t.getContext("2d");a.props.addBrightness(e);var n=e.getImageData(0,0,t.width,t.height);a.props.saveImageState(n)},a.decreaseBrightness=function(){var t=document.getElementById("canvas"),e=t.getContext("2d");a.props.decreaseBrightness(e);var n=e.getImageData(0,0,t.width,t.height);a.props.saveImageState(n)},a.addSticker=function(t){var e,n=a.props,i=n.mouseX,o=n.mouseY,s=a.props.stickers,r=s.stickerSize,c=s.selectedSticker;switch(r){case"sm":e=1.5;break;case"md":e=2;break;case"lg":e=3;break;case"xl":e=4;break;case"xxl":e=5;break;default:e=1}var l={title:c.title,src:c.src,width:c.width,height:c.height,x:i,y:o,size:e,id:(new Date).toISOString(),isDragging:!1};a.props.addSticker(l)},a.saveImage=function(){var t={ctx:document.getElementById("canvas").getContext("2d"),addedStickers:a.props.stickers.addedStickers};a.props.saveImage(t)},a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"undo",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("canvas"),a=e.getContext("2d"),t.next=4,this.props.decrementActiveImageState();case 4:try{a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState],0,0)}catch(n){console.log(n)}case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"redo",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("canvas"),a=e.getContext("2d"),t.prev=2,t.next=5,this.props.incrementActiveImageState();case 5:a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState-1],0,0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[2,8]])}));return function(){return t.apply(this,arguments)}}()},{key:"addFilter",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a,n,i;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.getElementById("canvas"),a=e.getContext("2d"),n=a.getImageData(0,0,e.width,e.height),i={filter:this.props.filters.selectedFilter,ctx:a},t.next=6,this.props.addFilter(i);case 6:try{this.props.saveImageState(n)}catch(o){console.log(o)}case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e=this.props,a=e.imageUploadHandler,n=e.setPaintBrushSettings,o=e.paintBrush,s=e.textSettings,r=e.showTextForm,c=e.top,l=e.bottom,d=e.middle,u=e.addText,h=e.togglePaintMode,g=this.state,m=g.showFilters,p=g.showStickers,v=g.showMobileTools;return t=p?i.a.createElement(R,null):m?i.a.createElement(L,null):v?i.a.createElement(tt,null,i.a.createElement("button",{onClick:this.addBrightness,className:"add"},"Brightness +"),i.a.createElement("button",{onClick:this.decreaseBrightness,className:"decrease"},"Brightness -"),i.a.createElement("button",{onClick:this.undo.bind(this),className:"undo"},"Undo"),i.a.createElement("button",{onClick:this.redo.bind(this),className:"redo"},"Redo"),i.a.createElement("button",{onClick:this.saveImage}," ",i.a.createElement("img",{src:K.save,alt:"save"})," Save"),i.a.createElement(Q,{togglePaintMode:h,setPaintBrushSettings:n,paintBrush:o,textSettings:s,showTextForm:r,top:c,bottom:l,middle:d,addText:u,secondaryClassname:"forMobile"})):null,i.a.createElement("div",{className:"mobileToolbar"},t,i.a.createElement("button",{onClick:this.toggleMenus,className:"showMobileTools"},"Tools"),i.a.createElement("button",{onClick:this.toggleMenus,className:"showStickers"},"Stickers"),i.a.createElement("button",{onClick:this.addSticker},"Add Sticker"),i.a.createElement("button",{onClick:this.toggleMenus,className:"showFilters"},"Filters"),i.a.createElement("button",{onClick:this.addFilter.bind(this)},"Add Filter"),i.a.createElement("label",{className:"fileContainer"},i.a.createElement("img",{src:K.camera,alt:"camera"}),"Click to choose an image",i.a.createElement("input",{type:"file",name:"image",onChange:a,accept:"image/png"})))}}]),e}(n.Component),at=Object(r.b)(function(t){return{canvas:t.canvas,stickers:t.stickers,filters:t.filters}},{addSticker:X,addFilter:F,addBrightness:P,decreaseBrightness:_,saveImage:M,saveImageState:N,decrementActiveImageState:A,incrementActiveImageState:D})(et),nt=(a(55),function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={dragging:!1,cordinatesX:window.innerWidth/2,cordinatesY:window.innerHeight/2},a.dragSticker=function(t){var e=a.props,n=e.sticker,i=e.canvasXbounding,o=e.canvasYbounding,s=e.canvasRightBounding,r=e.canvasBottomBounding;if(a.state.dragging&&(t.clientX-n.width<i?a.setState({cordinatesX:i}):t.clientX+n.width>s?a.setState({cordinatesX:s-2*n.width}):t.clientY-n.height<o?a.setState({cordinatesY:o}):t.clientY+n.height>r?a.setState({cordinatesY:r-2*n.height}):a.setState({cordinatesX:t.clientX-n.width/2,cordinatesY:t.clientY-n.height/2})),t.touches){var c=document.getElementById("canvas"),l=c.getBoundingClientRect().x,d=c.getBoundingClientRect().y,u=c.getBoundingClientRect().right,h=c.getBoundingClientRect().bottom;t.touches[0].clientX-n.width<l?a.setState({cordinatesX:l}):t.touches[0].clientX+n.width>u?a.setState({cordinatesX:u-2*n.width}):t.touches[0].clientY-n.height<d?a.setState({cordinatesY:d}):t.touches[0].clientY+n.height>h?a.setState({cordinatesY:h-2*n.height}):a.setState({cordinatesX:t.touches[0].clientX-n.width/2,cordinatesY:t.touches[0].clientY-n.height/2})}},a.saveNewCordinates=function(){var t=a.props.sticker,e=a.state,n=e.cordinatesX,i=e.cordinatesY,o={id:t.id,x:n,y:i};a.setState({dragging:!1}),a.props.saveNewStickerCordinates(o)},a.toggleDrag=function(){var t=a.state.dragging;a.setState({dragging:!t})},a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"render",value:function(){var t=this.state,e=t.dragging,a=t.cordinatesX,n=t.cordinatesY,o=this.props,s=o.sticker,r=o.deleteSticker;return i.a.createElement("div",null,i.a.createElement("img",{key:s.id,src:s.src,alt:"sticker",style:{position:"absolute",width:"".concat(s.width*s.size,"px"),height:"".concat(s.height*s.size,"px"),top:"".concat(n,"px"),left:"".concat(a,"px"),zIndex:"1050",border:"".concat(e?"1px solid red":"none")},id:s.id,onClick:this.toggleDrag,onMouseMove:this.dragSticker,onMouseLeave:this.saveNewCordinates,onDoubleClick:function(){return r(s.id)},draggable:"true",onTouchMove:this.dragSticker,onTouchEnd:this.saveNewCordinates}))}}]),e}(n.Component)),it=Object(r.b)(null,{deleteSticker:function(t){return function(e){e({type:I,payload:t})}},saveNewStickerCordinates:function(t){return function(e){e({type:C,payload:t})}}})(nt),ot=function(t){function e(){var t,a;Object(u.a)(this,e);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(g.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={mouseX:0,mouseY:0,canvasXbounding:null,canvasYbounding:null,canvasRightBounding:null,canvasBottomBounding:null,mobileWindowHeight:null,mobileWindowWidth:null,uploadedImage:null,orientationNumber:0,originalPhoto:null,mobile:null},a.imageUploadHandler=function(t){a.setState({uploadedImage:URL.createObjectURL(t.target.files[0])}),setTimeout(function(){return a.uploadMainImg()},100)},a.handleMouseMove=function(t){var e=a.props.paint,n=a.state,i=n.mouseY,o=n.mouseX;if(e.paint){var s={mouseX:o,mouseY:i,color:e.color,width:e.width,clientX:t.clientX,clientY:t.clientY};a.props.applyPaint(s)}var r=a.refs.canvas.getBoundingClientRect();a.setState({mouseX:t.clientX-r.left,mouseY:t.clientY-r.y})},a.handleTouchPaint=function(t){var e=a.props.paint,n=a.state,i=n.mouseY,o=n.mouseX,s=a.refs.canvas.getBoundingClientRect();if(a.props.paint.paint){a.setState({mouseX:t.touches[0].clientX-s.left,mouseY:t.touches[0].clientY-s.y});var r={mouseX:o,mouseY:i,color:e.color,width:e.width,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY};a.props.applyPaint(r),a.setState({mouseX:t.touches[0].clientX-s.left,mouseY:t.touches[0].clientY-s.y})}},a.togglePaintMobile=function(t){var e=a.refs.canvas.getBoundingClientRect();a.props.togglePaintMode(),a.setState({mouseX:t.touches[0].clientX-e.left,mouseY:t.touches[0].clientY-e.y})},a.setMouseCordinates=function(t){a.setState({mouseX:t.clientX,mouseY:t.clientY})},a}return Object(p.a)(e,t),Object(h.a)(e,[{key:"componentDidMount",value:function(){var t=this.refs.canvas,e=t.getContext("2d"),a=t.getBoundingClientRect().x,n=t.getBoundingClientRect().y,i=t.getBoundingClientRect().right,o=t.getBoundingClientRect().bottom,s=this.state.mobile;!0===("undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"))&&(console.log("User is on a mobile device, adjusting the canvas size"),this.setState({mobile:!0,mobileWindowHeight:.8*window.innerHeight,mobileWindowWidth:window.innerWidth}),t.width=window.innerWidth,t.height=.8*window.innerHeight),this.setState({mouseX:a+t.width/2,mouseY:n+t.height/2,canvasXbounding:a,canvasYbounding:n,canvasRightBounding:i,canvasBottomBounding:o});var r=t.width/2,c=t.height/2,l=t.width/2-60,d=function(t,a,n){e.font="".concat(t,"px Arial"),e.textAlign="center",e.fillStyle="rgba(150, 150, 150, 1)",e.fillText("Choose An Image To Edit",a,c)};window.onload=function(){s?d(20,l):d(30,r)};var u=e.getImageData(0,0,t.width,t.height);this.props.saveImageState(u)}},{key:"uploadMainImg",value:function(){var t=Object(d.a)(l.a.mark(function t(){var e,a,n,i,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.state.uploadedImage,a=this.refs.canvas,n=a.getContext("2d"),i={ctx:n,imageData:e},t.next=6,this.props.uploadMainImg(i);case 6:try{o=n.getImageData(0,0,a.width,a.height),this.props.saveImageState(o)}catch(s){console.log(s)}case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.uploadedImage,a=t.paintBrush,n=t.showTextForm,o=t.top,s=t.bottom,r=t.middle,c=t.mobile,l=t.mouseX,d=t.mouseY,u=t.canvasXbounding,h=t.canvasYbounding,g=t.canvasRightBounding,m=t.canvasBottomBounding,p=t.mobileWindowHeight,v=t.mobileWindowWidth,f=this.props.stickers.addedStickers;i.a.createRef();return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"topPart"},i.a.createElement(R,{secondaryClassname:"forDesktop"}),i.a.createElement(Q,{togglePaintMode:this.togglePaintMode,setPaintBrushSettings:this.setPaintBrushSettings,paintBrush:a,textSettings:this.textSettings,showTextForm:n,top:o,bottom:s,middle:r,addText:this.addText,secondaryClassname:"forDesktop"}),i.a.createElement("canvas",{ref:"canvas",id:"canvas",width:c?v:500,height:c?p:500,onMouseEnter:this.handleMouseMove,onMouseDown:this.props.togglePaintMode,onMouseUp:this.props.togglePaintMode,onMouseMove:this.handleMouseMove,onClick:this.setMouseCordinates,onTouchEnd:this.props.togglePaintMode,onTouchStart:this.togglePaintMobile,onTouchMove:this.handleTouchPaint,className:"canvas"}),f.length>0&&void 0!==f?f.map(function(t){return i.a.createElement(it,{sticker:t,mouseX:l,mouseY:d,canvasXbounding:u,canvasYbounding:h,canvasRightBounding:g,canvasBottomBounding:m})}):null,i.a.createElement(L,{secondaryClassname:"forDesktop"})),i.a.createElement(J,{adjustBrightness:this.adjustBrightness,imageUploadHandler:this.imageUploadHandler,secondaryClassname:"forDesktop",mouseX:l,mouseY:d}),null!==e?i.a.createElement("img",{src:e,ref:"mainImg",id:"mainImg",alt:"mainImg",style:{display:"none"}}):null,i.a.createElement("div",{className:"forMobile"},i.a.createElement(at,{imageUploadHandler:this.imageUploadHandler,mouseX:l,mouseY:d})))}}]),e}(n.Component),st=Object(r.b)(function(t){return{canvas:t.canvas,stickers:t.stickers,paint:t.paint}},{setCanvasRef:function(t){return function(e){e({type:v,payload:t})}},handleMouseMove:function(t){return function(e){e({type:b,payload:t})}},uploadMainImg:function(t){return function(e){var a=document.getElementById("canvas"),n=new Image,i=document.getElementById("mainImg");n.height>500&&(n.height=500),n.onload=function(){var t,e=a.getContext("2d");if(n.height>n.width){t=i.height/i.width;var o=a.width,s=a.width*t;a.width=o,a.height=s,a.height>500&&(a.height=500),e.drawImage(n,0,0,o,s)}else if(n.width>n.height){t=i.width/i.height;var r=a.width,c=a.height/t;a.width=r,a.height=c,e.drawImage(n,0,0,r,c),a.style.top="calc(50% - ".concat(a.height/2,"px)")}},n.src=t.imageData,e({type:f,payload:t})}},togglePaintMode:function(){return function(t){var e=document.getElementById("canvas"),a=e.getContext("2d").getImageData(0,0,e.width,e.height);t({type:O}),t(N(a))}},applyPaint:function(t){return function(){var e=document.getElementById("canvas"),a=e.getContext("2d"),n=e.getBoundingClientRect().x,i=e.getBoundingClientRect().y,o=t.clientX-n,s=t.clientY-i;a.strokeStyle=t.color,a.lineWidth=t.width,a.lineJoin="round",a.lineCap="round",a.beginPath(),a.moveTo(t.mouseX,t.mouseY),a.lineTo(o,s),a.stroke()}},saveImageState:N})(ot),rt=a(10),ct=a(1),lt=a(22),dt=a.n(lt),ut=a(23),ht=a.n(ut),gt=a(24),mt=a.n(gt),pt=a(25),vt=a.n(pt),ft=a(26),bt=a.n(ft),wt=a(27),St=a.n(wt),kt=a(28),yt=a.n(kt),Et=a(29),xt=a.n(Et),It=a(30),Ct=a.n(It),Bt=a(31),Ot=a.n(Bt),jt=a(32),Tt=a.n(jt),Mt=a(33),Nt=a.n(Mt),At=a(34),Dt=a.n(At),Xt=a(35),Yt=a.n(Xt),Rt=a(36),Ft=a.n(Rt),Pt=a(37),_t=a.n(Pt),Ut=a(38),Wt=a.n(Ut),Lt=a(39),zt=a.n(Lt),Ht=[{title:"glasses1",src:dt.a,height:20,width:50},{title:"glasses2",src:ht.a,height:20,width:50},{title:"glasses3",src:mt.a,height:20,width:50},{title:"teehee",src:Ct.a,height:26.7,width:76.7},{title:"lol",src:Ot.a,height:26.7,width:76.7},{title:"zzz",src:Tt.a,height:26.7,width:76.7},{title:"awesome",src:Nt.a,height:20.5,width:79},{title:"cool",src:Dt.a,height:33.5,width:49},{title:"exclamation",src:Yt.a,height:33.5,width:15},{title:"question",src:Ft.a,height:33.5,width:31},{title:"dollar",src:_t.a,height:33.5,width:31},{title:"euro",src:Wt.a,height:33.5,width:31},{title:"britishPound",src:zt.a,height:33.5,width:31},{title:"grin1",src:vt.a,height:20,width:50},{title:"tear1",src:bt.a,height:34,width:20.5},{title:"sad1",src:St.a,height:16,width:28},{title:"smirk1",src:yt.a,height:10,width:30},{title:"unibrow1",src:xt.a,height:9,width:48}],Gt={stickers:Ht,stickerSize:"md",selectedSticker:Ht[0],addedStickers:[]};var Vt={loading:!0,mouseX:0,mouseY:0,ctx:null,imageState:[],activeImageState:0};var Kt={filters:null,selectedFilter:U[0]};var qt={top:"",middle:"",bottom:""};var Jt={paint:!1,color:"#00a6fb",width:5};var Zt=Object(rt.c)({stickers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(ct.a)({},t,{selectedSticker:e.payload});case E:return Object(ct.a)({},t,{stickerSize:e.payload});case C:var a=e.payload,n=t.addedStickers.map(function(t){return a.id===t.id?(t.x=a.x,t.y=a.y,t):t});return Object(ct.a)({},t,{addedStickers:n});case x:return Object(ct.a)({},t,{addedStickers:t.addedStickers.concat(e.payload)});case I:return Object(ct.a)({},t,{addedStickers:t.addedStickers.filter(function(t){return t.id!==e.payload})});default:return Object(ct.a)({},t)}},canvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case b:return Object(ct.a)({},t);case v:return Object(ct.a)({},t,{canvasRef:e.payload,loading:!1});case f:return Object(ct.a)({},t,{ctx:e.payload});case w:return Object(ct.a)({},t,{imageState:t.imageState.concat(e.payload),activeImageState:t.activeImageState+=1});case S:return 0===t.activeImageState?Object(ct.a)({},t,{activeImageState:1}):Object(ct.a)({},t,{activeImageState:t.activeImageState-=1});case k:return Object(ct.a)({},t,{activeImageState:t.imageState.length===t.activeImageState?t.activeImageState:t.activeImageState+=1});default:return Object(ct.a)({},t)}},filters:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case B:return Object(ct.a)({},t,{selectedFilter:e.payload});default:return Object(ct.a)({},t)}},text:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt;return arguments.length>1&&arguments[1],Object(ct.a)({},t)},paint:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case j:return Object(ct.a)({},t,{width:e.payload});case T:return Object(ct.a)({},t,{color:e.payload});case O:return Object(ct.a)({},t,{paint:!t.paint});default:return Object(ct.a)({},t)}}}),$t=[a(40).a],Qt=Object(rt.d)(Zt,{},rt.a.apply(void 0,$t)),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var a=t.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}!function(t){if("serviceWorker"in navigator){if(new URL("/filtermatic",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/filtermatic","/service-worker.js");te?(function(t,e){fetch(t).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):ee(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ee(e,t)})}}(),s.a.render(i.a.createElement(r.a,{store:Qt},i.a.createElement(st,null)),document.getElementById("root"))}]),[[41,2,1]]]);
//# sourceMappingURL=main.ab112b48.chunk.js.map