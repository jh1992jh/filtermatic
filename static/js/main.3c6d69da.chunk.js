(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(20).concat([function(e,t,a){e.exports=a.p+"static/media/camera.e1513c0e.svg"},function(e,t,a){e.exports=a.p+"static/media/save.08042235.svg"},function(e,t,a){e.exports=a.p+"static/media/glasses1.e3c0de2a.svg"},function(e,t,a){e.exports=a.p+"static/media/glasses2.008b698c.svg"},function(e,t,a){e.exports=a.p+"static/media/glasses3.de98151c.svg"},function(e,t,a){e.exports=a.p+"static/media/grin1PNG.90f2c051.svg"},function(e,t,a){e.exports=a.p+"static/media/tear1.4c79d8f4.svg"},function(e,t,a){e.exports=a.p+"static/media/sad1.2adb5c86.svg"},function(e,t,a){e.exports=a.p+"static/media/smirk1PNG.ab9aeb72.svg"},function(e,t,a){e.exports=a.p+"static/media/unibrow1.7381bf4b.svg"},function(e,t,a){e.exports=a.p+"static/media/teehee.d2211d63.svg"},function(e,t,a){e.exports=a.p+"static/media/lol.252b2af4.svg"},function(e,t,a){e.exports=a.p+"static/media/zzz.724a58af.svg"},function(e,t,a){e.exports=a.p+"static/media/awesome.260ab8ee.svg"},function(e,t,a){e.exports=a.p+"static/media/cool.477ba34c.svg"},function(e,t,a){e.exports=a.p+"static/media/exclamation.88226d08.svg"},function(e,t,a){e.exports=a.p+"static/media/question.eb720450.svg"},function(e,t,a){e.exports=a.p+"static/media/dollar.0a798ebe.svg"},function(e,t,a){e.exports=a.p+"static/media/euro.4758b5c6.svg"},function(e,t,a){e.exports=a.p+"static/media/britishPound.b897a7a1.svg"},,function(e,t,a){e.exports=a(57)},,,,,,,,,,function(e,t,a){},,,,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(18),s=a.n(o),r=a(5),c=(a(51),a(8)),l=a.n(c),d=a(9),u=a(2),g=a(3),h=a(6),m=a(4),p=a(7),v="SET_CANVAS_REF",f="UPLOAD_MAIN_IMG",b="HANDLE_MOUSE_MOVE",w="SAVE_IMAGE_STATE",S="DECREMENT_ACTIVE_IMAGE_STATE",k="INCREMENT_ACTIVE_IMAGE_STATE",y="SELCET_STICKER",E="SELECT_STICKER_SIZE",x="ADD_STICKER",I="DELETE_STICKER",C="SAVE_NEW_STICKER_CORDINATES",B="SELECT_FILTER",O="TOGGLE_PAINT",j="CHANGE_BRUSH_WIDTH",T="CHANGE_BRUSH_COLOR",M=function(e){return function(){for(var t=document.getElementById("canvas"),a=e.ctx,n=t.getBoundingClientRect().x,i=t.getBoundingClientRect().y,o=e.addedStickers,s=a.getImageData(0,0,t.width,t.height),r=function(e){var t=new Image;t.src=o[e].src,t.onload=function(){a.drawImage(t,o[e].x-n,o[e].y-i,o[e].width*o[e].size,o[e].height*o[e].size)}},c=0;c<o.length;c++)r(c);setTimeout(function(){var e=document.createElement("a");e.className="modalSave";var n=document.createElement("img"),i=function(e){var t,a,n,i=e.getContext("2d"),o=document.createElement("canvas").getContext("2d"),s=i.getImageData(0,0,e.width,e.height),r=s.data.length,c={top:null,left:null,right:null,bottom:null};for(t=0;t<r;t+=4)0!==s.data[t+3]&&(a=t/4%e.width,n=~~(t/4/e.width),null===c.top&&(c.top=n),null===c.left?c.left=a:a<c.left&&(c.left=a),null===c.right?c.right=a:c.right<a&&(c.right=a),null===c.bottom?c.bottom=n:c.bottom<n&&(c.bottom=n));var l=c.bottom-c.top,d=c.right-c.left,u=i.getImageData(c.left,c.top,d,l);return o.canvas.width=d,o.canvas.height=l,o.putImageData(u,0,0),o.canvas}(t);n.src=i.toDataURL(),e.innerHTML="Download image",e.appendChild(n),e.style.height="".concat(i.height+30,"px"),e.addEventListener("click",function(t){e.href=i.toDataURL(),e.download="FilterMatic".concat((new Date).toISOString(),".png"),e.remove()},!1),document.body.appendChild(e),document.body.addEventListener("click",function(){a.putImageData(s,0,0),e.remove()})},300)}},N=function(e){return function(t){t({type:w,payload:e})}},A=function(){return function(e){e({type:S})}},D=function(){return function(e){e({type:k})}},X=function(e){return function(t){t({type:x,payload:e})}},Y=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.secondaryClassname,a=this.props.stickers,n=a.selectedSticker,o=a.stickers.map(function(t){return i.a.createElement("img",{key:t.title,src:t.src,alt:"sticker",onClick:function(){return e.props.selectSticker(t)},className:n.title===t.title?"selected":null})});return i.a.createElement("div",{className:"stickerContainer ".concat(t)},i.a.createElement("div",{className:"infoAndSelectors"},i.a.createElement("h3",null,"Stickers"),i.a.createElement("select",{name:"stickerSize",onChange:function(t){return e.props.selectStickerSize(t.target.value)}},i.a.createElement("option",{value:"sm"},"Small"),i.a.createElement("option",{selected:!0,value:"md"},"Medium"),i.a.createElement("option",{value:"lg"},"Large"),i.a.createElement("option",{value:"xl"},"Extra Large"),i.a.createElement("option",{value:"xxl"},"Extra extra Large"))),i.a.createElement("div",{className:"stickers"},o))}}]),t}(n.Component),R=Object(r.b)(function(e){return{stickers:e.stickers}},{selectSticker:function(e){return function(t){t({type:y,payload:e})}},selectStickerSize:function(e){return function(t){t({type:E,payload:e})}}})(Y),F=function(e){return function(){for(var t=document.getElementById("canvas"),a=e.ctx,n=a.getImageData(0,0,t.width,t.height),i=0;i<n.data.length;i+=4)n.data[i+0]=n.data[i+0]+e.filter.r,n.data[i+1]=n.data[i+1]+e.filter.g,n.data[i+2]=n.data[i+2]+e.filter.b;a.putImageData(n,0,0)}},P=function(e){return function(){for(var t=document.getElementById("canvas"),a=e.getImageData(0,0,t.width,t.height),n=0;n<a.data.length;n+=4)a.data[n+0]=a.data[n+0]+10,a.data[n+1]=a.data[n+1]+10,a.data[n+2]=a.data[n+2]+10;e.putImageData(a,0,0)}},_=function(e){return function(){for(var t=document.getElementById("canvas"),a=e.getImageData(0,0,t.width,t.height),n=0;n<a.data.length;n+=4)a.data[n+0]=a.data[n+0]-10,a.data[n+1]=a.data[n+1]-10,a.data[n+2]=a.data[n+2]-10;e.putImageData(a,0,0)}},U=[{title:"lightBlue",r:0,g:13,b:55.5},{title:"Brilliant Lavander",r:26,g:-16,b:35},{title:"Camouflage Green",r:20,g:34,b:7},{title:"Azure Mist",r:40,g:55,b:55},{title:"Amber",r:25,g:-29,b:-50},{title:"Alien",r:-28,g:2,b:-58},{title:"Cool Green",r:-91,g:15,b:-36},{title:"Snow",r:55,g:50,b:50},{title:"Sky Blue",r:-65,g:6,b:15},{title:"Lime",r:-50,g:5,b:-50},{title:"Hot Pink",r:25,g:-25,b:0},{title:"Turquoise",r:-100,g:16,b:19}],W=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props,t=e.selectFilter,a=e.secondaryClassname,n=this.props.filters.selectedFilter,o=U.map(function(e){return i.a.createElement("div",{key:e.title,onClick:function(){return t(e)},style:(n.title,e.title,{background:"rgba(".concat(e.r+100,", ").concat(e.g+100,", ").concat(e.b+100,", 0.5)")}),className:n.title===e.title?"selected filter":"filter"},e.title)});return i.a.createElement("div",{className:"filterContainer ".concat(a)},i.a.createElement("div",{className:"infoAndSelectors"},i.a.createElement("h3",null,"Filters")),i.a.createElement("div",{className:"filters"},o))}}]),t}(n.Component),L=Object(r.b)(function(e){return{filters:e.filters}},{selectFilter:function(e){return function(t){t({type:B,payload:e})}}})(W),z=a(20),H=a.n(z),G=a(21),V=a.n(G),K={camera:H.a,save:V.a},q=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).addSticker=function(e){var t,n=a.props,i=n.mouseX,o=n.mouseY,s=a.props.stickers,r=s.stickerSize,c=s.selectedSticker;switch(r){case"sm":t=1.5;break;case"md":t=2;break;case"lg":t=3;break;case"xl":t=4;break;case"xxl":t=5;break;default:t=1}var l={title:c.title,src:c.src,width:c.width,height:c.height,x:i,y:o,size:t,id:(new Date).toISOString(),isDragging:!1};a.props.addSticker(l)},a.addFilter=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),n={filter:a.props.filters.selectedFilter,ctx:t};a.props.addFilter(n);var i=t.getImageData(0,0,e.width,e.height);a.props.saveImageState(i)},a.addBrightness=function(){var e=document.getElementById("canvas"),t=e.getContext("2d");a.props.addBrightness(t);var n=t.getImageData(0,0,e.width,e.height);a.props.saveImageState(n)},a.decreaseBrightness=function(){var e=document.getElementById("canvas"),t=e.getContext("2d");a.props.decreaseBrightness(t);var n=t.getImageData(0,0,e.width,e.height);a.props.saveImageState(n)},a.saveImage=function(){var e={ctx:document.getElementById("canvas").getContext("2d"),addedStickers:a.props.stickers.addedStickers};a.props.saveImage(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"undo",value:function(){var e=Object(d.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("canvas"),a=t.getContext("2d"),e.prev=2,e.next=5,this.props.decrementActiveImageState();case 5:a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState-1],0,0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"redo",value:function(){var e=Object(d.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("canvas"),a=t.getContext("2d"),e.prev=2,e.next=5,this.props.incrementActiveImageState();case 5:a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState-1],0,0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.imageUploadHandler,a=e.secondaryClassname;return i.a.createElement("div",{className:"buttons ".concat(a)},i.a.createElement("button",{onClick:this.addBrightness,className:"add"},"Brightness +"),i.a.createElement("button",{onClick:this.decreaseBrightness,className:"decrease"},"Brightness -"),i.a.createElement("button",{onClick:this.addSticker},"Add a Sticker"),i.a.createElement("button",{onClick:this.undo.bind(this),className:"undo"},"Undo"),i.a.createElement("button",{onClick:this.redo.bind(this),className:"redo"},"Redo"),i.a.createElement("button",{onClick:this.saveImage,ref:"save"}," ",i.a.createElement("img",{src:K.save,alt:"save"})," Save"),i.a.createElement("button",{onClick:this.addFilter},"Filter"),i.a.createElement("label",{className:"fileContainer"},i.a.createElement("img",{src:K.camera,alt:"camera"}),"Click to choose an image",i.a.createElement("input",{type:"file",name:"image",onChange:t,accept:"image/*"})))}}]),t}(n.Component),J=Object(r.b)(function(e){return{stickers:e.stickers,filters:e.filters,canvas:e.canvas}},{addSticker:X,addFilter:F,addBrightness:P,decreaseBrightness:_,saveImage:M,saveImageState:N,decrementActiveImageState:A,incrementActiveImageState:D})(q),Z=a(13),$=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={showTextForm:!1,top:"",middle:"",bottom:""},a.toggleTextForm=function(){var e=a.state.showTextForm;a.setState({showTextForm:!e})},a.inputText=function(e){a.setState(Object(Z.a)({},e.target.name,e.target.value))},a.addText=function(e){e.preventDefault();var t=a.state,n=t.top,i=t.bottom,o=t.middle,s={ctx:document.getElementById("canvas").getContext("2d"),top:n,middle:o,bottom:i};a.props.addText(s)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.secondaryClassname,a=this.state,n=a.showTextForm,o=a.top,s=a.bottom,r=a.middle;return i.a.createElement("div",{className:"paintBrush ".concat(t)},n?i.a.createElement("form",{className:"textForm",onSubmit:this.addText},i.a.createElement("input",{type:"text",name:"top",value:o,onChange:this.inputText}),i.a.createElement("input",{type:"text",name:"middle",value:r,onChange:this.inputText}),i.a.createElement("input",{type:"text",name:"bottom",value:s,onChange:this.inputText}),i.a.createElement("button",{type:"submit"},"Add Text")):null,i.a.createElement("button",{className:"textButton",onClick:this.toggleTextForm},"T"),i.a.createElement("input",{type:"range",name:"width",min:"3",max:"100",value:this.props.paint.width,step:"1",className:"strokeWidth",onChange:function(t){return e.props.changeBrushWidth(t.target.value)}}),i.a.createElement("input",{type:"color",name:"color",value:this.props.paint.color,onChange:function(t){return e.props.changeBrushColor(t.target.value)},className:"strokeColor"}))}}]),t}(n.Component),Q=Object(r.b)(function(e){return{paint:e.paint}},{addText:function(e){return function(t){var a=document.getElementById("canvas"),n=e.ctx,i=a.width/2,o=.2*a.height,s=.5*a.height,r=.9*a.height;n.font="50px Impact",n.textAlign="center",n.fillStyle="rgba(250, 250, 250, 1)",e.top.length>0&&n.fillText(e.top.toUpperCase(),i,o),e.middle.length>0&&n.fillText(e.middle.toUpperCase(),i,s),e.bottom.length>0&&n.fillText(e.bottom.toUpperCase(),i,r);var c=n.getImageData(0,0,a.width,a.height);t(N(c))}},changeBrushWidth:function(e){return function(t){t({type:j,payload:e})}},changeBrushColor:function(e){return function(t){t({type:T,payload:e})}}})($),ee=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.children;return i.a.createElement("div",{className:"mobileTools"},e)}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={showFilters:!1,showStickers:!1,showMobileTools:!1},a.toggleMenus=function(e){var t=a.state,n=t.showFilters,i=t.showStickers,o=t.showMobileTools;"showStickers"===e.target.className&&a.setState({showStickers:!i,showFilters:!1,showMobileTools:!1}),"showFilters"===e.target.className&&a.setState({showFilters:!n,showStickers:!1,showMobileTools:!1}),"showMobileTools"===e.target.className&&a.setState({showMobileTools:!o,showStickers:!1,showFilters:!1})},a.addBrightness=function(){var e=document.getElementById("canvas"),t=e.getContext("2d");a.props.addBrightness(t);var n=t.getImageData(0,0,e.width,e.height);a.props.saveImageState(n)},a.decreaseBrightness=function(){var e=document.getElementById("canvas"),t=e.getContext("2d");a.props.decreaseBrightness(t);var n=t.getImageData(0,0,e.width,e.height);a.props.saveImageState(n)},a.addSticker=function(e){var t,n=a.props,i=n.mouseX,o=n.mouseY,s=a.props.stickers,r=s.stickerSize,c=s.selectedSticker;switch(r){case"sm":t=1.5;break;case"md":t=2;break;case"lg":t=3;break;case"xl":t=4;break;case"xxl":t=5;break;default:t=1}var l={title:c.title,src:c.src,width:c.width,height:c.height,x:i,y:o,size:t,id:(new Date).toISOString(),isDragging:!1};a.props.addSticker(l)},a.addFilter=function(){var e=document.getElementById("canvas"),t=e.getContext("2d"),n={filter:a.props.filters.selectedFilter,ctx:t};a.props.addFilter(n);var i=t.getImageData(0,0,e.width,e.height);a.props.saveImageState(i)},a.saveImage=function(){var e={ctx:document.getElementById("canvas").getContext("2d"),addedStickers:a.props.stickers.addedStickers};a.props.saveImage(e)},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"undo",value:function(){var e=Object(d.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("canvas"),a=t.getContext("2d"),e.prev=2,e.next=5,this.props.decrementActiveImageState();case 5:a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState-1],0,0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"redo",value:function(){var e=Object(d.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("canvas"),a=t.getContext("2d"),e.prev=2,e.next=5,this.props.incrementActiveImageState();case 5:a.putImageData(this.props.canvas.imageState[this.props.canvas.activeImageState-1],0,0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props,a=t.imageUploadHandler,n=t.setPaintBrushSettings,o=t.paintBrush,s=t.textSettings,r=t.showTextForm,c=t.top,l=t.bottom,d=t.middle,u=t.addText,g=t.togglePaintMode,h=this.state,m=h.showFilters,p=h.showStickers,v=h.showMobileTools;return e=p?i.a.createElement(R,null):m?i.a.createElement(L,null):v?i.a.createElement(ee,null,i.a.createElement("button",{onClick:this.addBrightness,className:"add"},"Brightness +"),i.a.createElement("button",{onClick:this.decreaseBrightness,className:"decrease"},"Brightness -"),i.a.createElement("button",{onClick:this.undo.bind(this),className:"undo"},"Undo"),i.a.createElement("button",{onClick:this.redo.bind(this),className:"redo"},"Redo"),i.a.createElement("button",{onClick:this.saveImage}," ",i.a.createElement("img",{src:K.save,alt:"save"})," Save"),i.a.createElement(Q,{togglePaintMode:g,setPaintBrushSettings:n,paintBrush:o,textSettings:s,showTextForm:r,top:c,bottom:l,middle:d,addText:u,secondaryClassname:"forMobile"})):null,i.a.createElement("div",{className:"mobileToolbar"},e,i.a.createElement("button",{onClick:this.toggleMenus,className:"showMobileTools"},"Tools"),i.a.createElement("button",{onClick:this.toggleMenus,className:"showStickers"},"Stickers"),i.a.createElement("button",{onClick:this.addSticker},"Add Sticker"),i.a.createElement("button",{onClick:this.toggleMenus,className:"showFilters"},"Filters"),i.a.createElement("button",{onClick:this.addFilter},"Add Filter"),i.a.createElement("label",{className:"fileContainer"},i.a.createElement("img",{src:K.camera,alt:"camera"}),"Click to choose an image",i.a.createElement("input",{type:"file",name:"image",onChange:a,accept:"image/png"})))}}]),t}(n.Component),ae=Object(r.b)(function(e){return{canvas:e.canvas,stickers:e.stickers,filters:e.filters}},{addSticker:X,addFilter:F,addBrightness:P,decreaseBrightness:_,saveImage:M,saveImageState:N,decrementActiveImageState:A,incrementActiveImageState:D})(te),ne=(a(55),function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={dragging:!1,cordinatesX:window.innerWidth/2,cordinatesY:window.innerHeight/2},a.dragSticker=function(e){var t=a.props,n=t.sticker,i=t.canvasXbounding,o=t.canvasYbounding,s=t.canvasRightBounding,r=t.canvasBottomBounding;if(a.state.dragging&&(e.clientX-n.width<i?a.setState({cordinatesX:i}):e.clientX+n.width>s?a.setState({cordinatesX:s-2*n.width}):e.clientY-n.height<o?a.setState({cordinatesY:o}):e.clientY+n.height>r?a.setState({cordinatesY:r-2*n.height}):a.setState({cordinatesX:e.clientX-n.width/2,cordinatesY:e.clientY-n.height/2})),e.touches){var c=document.getElementById("canvas"),l=c.getBoundingClientRect().x,d=c.getBoundingClientRect().y,u=c.getBoundingClientRect().right,g=c.getBoundingClientRect().bottom;e.touches[0].clientX-n.width<l?a.setState({cordinatesX:l}):e.touches[0].clientX+n.width>u?a.setState({cordinatesX:u-2*n.width}):e.touches[0].clientY-n.height<d?a.setState({cordinatesY:d}):e.touches[0].clientY+n.height>g?a.setState({cordinatesY:g-2*n.height}):a.setState({cordinatesX:e.touches[0].clientX-n.width/2,cordinatesY:e.touches[0].clientY-n.height/2})}},a.saveNewCordinates=function(){var e=a.props.sticker,t=a.state,n=t.cordinatesX,i=t.cordinatesY,o={id:e.id,x:n,y:i};a.setState({dragging:!1}),a.props.saveNewStickerCordinates(o)},a.toggleDrag=function(){var e=a.state.dragging;a.setState({dragging:!e})},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.state,t=e.dragging,a=e.cordinatesX,n=e.cordinatesY,o=this.props,s=o.sticker,r=o.deleteSticker;return i.a.createElement("div",null,i.a.createElement("img",{key:s.id,src:s.src,alt:"sticker",style:{position:"absolute",width:"".concat(s.width*s.size,"px"),height:"".concat(s.height*s.size,"px"),top:"".concat(n,"px"),left:"".concat(a,"px"),zIndex:"1050",border:"".concat(t?"1px solid red":"none")},id:s.id,onClick:this.toggleDrag,onMouseMove:this.dragSticker,onMouseLeave:this.saveNewCordinates,onDoubleClick:function(){return r(s.id)},draggable:"true",onTouchMove:this.dragSticker,onTouchEnd:this.saveNewCordinates}))}}]),t}(n.Component)),ie=Object(r.b)(null,{deleteSticker:function(e){return function(t){t({type:I,payload:e})}},saveNewStickerCordinates:function(e){return function(t){t({type:C,payload:e})}}})(ne),oe=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={mouseX:0,mouseY:0,canvasXbounding:null,canvasYbounding:null,canvasRightBounding:null,canvasBottomBounding:null,mobileWindowHeight:null,mobileWindowWidth:null,uploadedImage:null,orientationNumber:0,originalPhoto:null,mobile:null},a.imageUploadHandler=function(e){a.setState({uploadedImage:URL.createObjectURL(e.target.files[0])}),setTimeout(function(){return a.uploadMainImg()},100)},a.handleMouseMove=function(e){var t=a.props.paint,n=a.state,i=n.mouseY,o=n.mouseX;if(t.paint){var s={mouseX:o,mouseY:i,color:t.color,width:t.width,clientX:e.clientX,clientY:e.clientY};a.props.applyPaint(s)}var r=a.refs.canvas.getBoundingClientRect();a.setState({mouseX:e.clientX-r.left,mouseY:e.clientY-r.y})},a.handleTouchPaint=function(e){var t=a.props.paint,n=a.state,i=n.mouseY,o=n.mouseX,s=a.refs.canvas.getBoundingClientRect();if(a.props.paint.paint){a.setState({mouseX:e.touches[0].clientX-s.left,mouseY:e.touches[0].clientY-s.y});var r={mouseX:o,mouseY:i,color:t.color,width:t.width,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY};a.props.applyPaint(r),a.setState({mouseX:e.touches[0].clientX-s.left,mouseY:e.touches[0].clientY-s.y})}},a.togglePaintMobile=function(e){var t=a.refs.canvas.getBoundingClientRect();a.props.togglePaintMode(),a.setState({mouseX:e.touches[0].clientX-t.left,mouseY:e.touches[0].clientY-t.y})},a.setMouseCordinates=function(e){a.setState({mouseX:e.clientX,mouseY:e.clientY})},a}return Object(p.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.refs.canvas,t=e.getContext("2d"),a=e.getBoundingClientRect().x,n=e.getBoundingClientRect().y,i=e.getBoundingClientRect().right,o=e.getBoundingClientRect().bottom,s=this.state.mobile;!0===("undefined"!==typeof window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"))&&(console.log("User is on a mobile device, adjusting the canvas size"),this.setState({mobile:!0,mobileWindowHeight:.8*window.innerHeight,mobileWindowWidth:window.innerWidth}),e.width=window.innerWidth,e.height=.8*window.innerHeight),this.setState({mouseX:a+e.width/2,mouseY:n+e.height/2,canvasXbounding:a,canvasYbounding:n,canvasRightBounding:i,canvasBottomBounding:o});var r=e.width/2,c=e.height/2,l=e.width/2-60,d=function(e,a,n){t.font="".concat(e,"px Arial"),t.textAlign="center",t.fillStyle="rgba(150, 150, 150, 1)",t.fillText("Choose An Image To Edit",a,c)};window.onload=function(){s?d(20,l):d(30,r)}}},{key:"uploadMainImg",value:function(){var e=Object(d.a)(l.a.mark(function e(){var t,a,n,i,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.uploadedImage,a=this.refs.canvas,n=a.getContext("2d"),i={ctx:n,imageData:t},e.next=6,this.props.uploadMainImg(i);case 6:try{o=n.getImageData(0,0,a.width,a.height),this.props.saveImageState(o)}catch(s){console.log(s)}case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.uploadedImage,a=e.paintBrush,n=e.showTextForm,o=e.top,s=e.bottom,r=e.middle,c=e.mobile,l=e.mouseX,d=e.mouseY,u=e.canvasXbounding,g=e.canvasYbounding,h=e.canvasRightBounding,m=e.canvasBottomBounding,p=e.mobileWindowHeight,v=e.mobileWindowWidth,f=this.props.stickers.addedStickers;i.a.createRef();return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"topPart"},i.a.createElement(R,{secondaryClassname:"forDesktop"}),i.a.createElement(Q,{togglePaintMode:this.togglePaintMode,setPaintBrushSettings:this.setPaintBrushSettings,paintBrush:a,textSettings:this.textSettings,showTextForm:n,top:o,bottom:s,middle:r,addText:this.addText,secondaryClassname:"forDesktop"}),i.a.createElement("canvas",{ref:"canvas",id:"canvas",width:c?v:500,height:c?p:500,onMouseEnter:this.handleMouseMove,onMouseDown:this.props.togglePaintMode,onMouseUp:this.props.togglePaintMode,onMouseMove:this.handleMouseMove,onClick:this.setMouseCordinates,onTouchEnd:this.props.togglePaintMode,onTouchStart:this.togglePaintMobile,onTouchMove:this.handleTouchPaint,className:"canvas"}),f.length>0&&void 0!==f?f.map(function(e){return i.a.createElement(ie,{sticker:e,mouseX:l,mouseY:d,canvasXbounding:u,canvasYbounding:g,canvasRightBounding:h,canvasBottomBounding:m})}):null,i.a.createElement(L,{secondaryClassname:"forDesktop"})),i.a.createElement(J,{adjustBrightness:this.adjustBrightness,imageUploadHandler:this.imageUploadHandler,secondaryClassname:"forDesktop",mouseX:l,mouseY:d}),null!==t?i.a.createElement("img",{src:t,ref:"mainImg",id:"mainImg",alt:"mainImg",style:{display:"none"}}):null,i.a.createElement("div",{className:"forMobile"},i.a.createElement(ae,{imageUploadHandler:this.imageUploadHandler,mouseX:l,mouseY:d})))}}]),t}(n.Component),se=Object(r.b)(function(e){return{canvas:e.canvas,stickers:e.stickers,paint:e.paint}},{setCanvasRef:function(e){return function(t){t({type:v,payload:e})}},handleMouseMove:function(e){return function(t){t({type:b,payload:e})}},uploadMainImg:function(e){return function(t){var a=document.getElementById("canvas"),n=new Image,i=document.getElementById("mainImg");n.height>500&&(n.height=500),n.onload=function(){var e,t=a.getContext("2d");if(n.height>n.width){e=i.height/i.width;var o=a.width,s=a.width*e;a.width=o,a.height=s,a.height>500&&(a.height=500),t.drawImage(n,0,0,o,s)}else if(n.width>n.height){e=i.width/i.height;var r=a.width,c=a.height/e;a.width=r,a.height=c,t.drawImage(n,0,0,r,c),a.style.top="calc(50% - ".concat(a.height/2,"px)")}},n.src=e.imageData,t({type:f,payload:e})}},togglePaintMode:function(){return function(e){var t=document.getElementById("canvas"),a=t.getContext("2d").getImageData(0,0,t.width,t.height);e({type:O}),e(N(a))}},applyPaint:function(e){return function(){var t=document.getElementById("canvas"),a=t.getContext("2d"),n=t.getBoundingClientRect().x,i=t.getBoundingClientRect().y,o=e.clientX-n,s=e.clientY-i;a.strokeStyle=e.color,a.lineWidth=e.width,a.lineJoin="round",a.lineCap="round",a.beginPath(),a.moveTo(e.mouseX,e.mouseY),a.lineTo(o,s),a.stroke()}},saveImageState:N})(oe),re=a(10),ce=a(1),le=a(22),de=a.n(le),ue=a(23),ge=a.n(ue),he=a(24),me=a.n(he),pe=a(25),ve=a.n(pe),fe=a(26),be=a.n(fe),we=a(27),Se=a.n(we),ke=a(28),ye=a.n(ke),Ee=a(29),xe=a.n(Ee),Ie=a(30),Ce=a.n(Ie),Be=a(31),Oe=a.n(Be),je=a(32),Te=a.n(je),Me=a(33),Ne=a.n(Me),Ae=a(34),De=a.n(Ae),Xe=a(35),Ye=a.n(Xe),Re=a(36),Fe=a.n(Re),Pe=a(37),_e=a.n(Pe),Ue=a(38),We=a.n(Ue),Le=a(39),ze=a.n(Le),He=[{title:"glasses1",src:de.a,height:20,width:50},{title:"glasses2",src:ge.a,height:20,width:50},{title:"glasses3",src:me.a,height:20,width:50},{title:"teehee",src:Ce.a,height:26.7,width:76.7},{title:"lol",src:Oe.a,height:26.7,width:76.7},{title:"zzz",src:Te.a,height:26.7,width:76.7},{title:"awesome",src:Ne.a,height:20.5,width:79},{title:"cool",src:De.a,height:33.5,width:49},{title:"exclamation",src:Ye.a,height:33.5,width:15},{title:"question",src:Fe.a,height:33.5,width:31},{title:"dollar",src:_e.a,height:33.5,width:31},{title:"euro",src:We.a,height:33.5,width:31},{title:"britishPound",src:ze.a,height:33.5,width:31},{title:"grin1",src:ve.a,height:20,width:50},{title:"tear1",src:be.a,height:34,width:20.5},{title:"sad1",src:Se.a,height:16,width:28},{title:"smirk1",src:ye.a,height:10,width:30},{title:"unibrow1",src:xe.a,height:9,width:48}],Ge={stickers:He,stickerSize:"md",selectedSticker:He[0],addedStickers:[]};var Ve={loading:!0,mouseX:0,mouseY:0,ctx:null,imageState:[],activeImageState:0};var Ke={filters:null,selectedFilter:U[0]};var qe={top:"",middle:"",bottom:""};var Je={paint:!1,color:"#00a6fb",width:5};var Ze=Object(re.c)({stickers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(ce.a)({},e,{selectedSticker:t.payload});case E:return Object(ce.a)({},e,{stickerSize:t.payload});case C:var a=t.payload,n=e.addedStickers.map(function(e){return a.id===e.id?(e.x=a.x,e.y=a.y,e):e});return Object(ce.a)({},e,{addedStickers:n});case x:return Object(ce.a)({},e,{addedStickers:e.addedStickers.concat(t.payload)});case I:return Object(ce.a)({},e,{addedStickers:e.addedStickers.filter(function(e){return e.id!==t.payload})});default:return Object(ce.a)({},e)}},canvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(ce.a)({},e);case v:return Object(ce.a)({},e,{canvasRef:t.payload,loading:!1});case f:return console.log(t.payload),Object(ce.a)({},e,{ctx:t.payload});case w:return Object(ce.a)({},e,{imageState:e.imageState.concat(t.payload),activeImageState:e.activeImageState+=1});case S:return 0===e.activeImageState?Object(ce.a)({},e,{activeImageState:1}):Object(ce.a)({},e,{activeImageState:e.activeImageState-=1});case k:return Object(ce.a)({},e,{activeImageState:e.activeImageState>e.imageState.length-1?e.imageState.length:e.activeImageState+1});default:return Object(ce.a)({},e)}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(ce.a)({},e,{selectedFilter:t.payload});default:return Object(ce.a)({},e)}},text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe;return arguments.length>1&&arguments[1],Object(ce.a)({},e)},paint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(ce.a)({},e,{width:t.payload});case T:return Object(ce.a)({},e,{color:t.payload});case O:return Object(ce.a)({},e,{paint:!e.paint});default:return Object(ce.a)({},e)}}}),$e=[a(40).a],Qe=Object(re.d)(Ze,{},re.a.apply(void 0,$e)),et=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function tt(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}!function(e){if("serviceWorker"in navigator){if(new URL("/filtermatic",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/filtermatic","/service-worker.js");et?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):tt(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):tt(t,e)})}}(),s.a.render(i.a.createElement(r.a,{store:Qe},i.a.createElement(se,null)),document.getElementById("root"))}]),[[41,2,1]]]);
//# sourceMappingURL=main.3c6d69da.chunk.js.map